/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var se=Object.defineProperty;var $e=Object.getOwnPropertyDescriptor;var je=Object.getOwnPropertyNames;var Qe=Object.prototype.hasOwnProperty;var D=(c,e)=>()=>(c&&(e=c(c=0)),e);var re=(c,e)=>{for(var t in e)se(c,t,{get:e[t],enumerable:!0})},qe=(c,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of je(e))!Qe.call(c,i)&&i!==t&&se(c,i,{get:()=>e[i],enumerable:!(n=$e(e,i))||n.enumerable});return c};var Xe=c=>qe(se({},"__esModule",{value:!0}),c);var Ie,xe=D(()=>{Ie={menu:{remoteImage:"Remote image",copyImageUrl:"Copy image URL",copyImage:"Copy image",copyLocalPath:"Copy local path",resizeTo:"Resize to {size}",removeCustomSize:"Remove custom size",showInFinder:"Show in Finder",showInExplorer:"Show in Explorer",renameImage:"Rename image",deleteImageAndLink:"Delete image and link",openInNewTab:"Open in new tab",openToTheRight:"Open to the right",openInNewWindow:"Open in new window",openInDefaultApp:"Open in default app",openInEditor:"Open in {editor}"},notices:{imageUrlCopied:"Image URL copied to clipboard",imageCopied:"Image copied to clipboard",filePathCopied:"File path copied to clipboard",customSizeRemoved:"Removed custom size from image",imageRenamed:"Image renamed successfully",imageAndLinksDeleted:"Image and links deleted successfully",imageDeleted:"Image deleted successfully",couldNotReadDimensions:"Could not read image dimensions",couldNotDetermineSvgDimensions:"Could not determine SVG dimensions (missing width/height/viewBox)",couldNotDetermineImageDimensions:"Could not determine image dimensions",cannotCopyPath:"Cannot copy path - not using file system adapter",couldNotLocateImage:"Could not locate image file",setEditorPath:"Please set your {editor} path in Pixel Perfect Image settings.",cannotOpenFile:"Cannot open file: This vault uses a non-standard storage system",couldNotOpenInEditor:"Could not open file in {editor}.",failedToRename:"Failed to rename image",failedToDelete:"Failed to delete image and links",clickInEditorFirst:"Please click in the editor first, then try copying again",failedToResize:"Failed to resize image",failedToPerformAction:"Failed to {action}",failedToCopyUrl:"Failed to copy image URL",failedToCopyImage:"Failed to copy image to clipboard",failedToCopyPath:"Failed to copy file path",failedToResizeTo:"Failed to resize image to {size}",failedToRemoveSize:"Failed to remove custom size from image",failedToOpenExplorer:"Failed to open system explorer",failedToRenameImage:"Failed to rename image",failedToDeleteImage:"Failed to delete image",failedToOpenInNewTab:"Failed to open image in new tab",failedToOpenToTheRight:"Failed to open image to the right",failedToOpenInNewWindow:"Failed to open image in new window",failedToOpenInDefaultApp:"Failed to open in default app",failedToOpenInEditor:"Failed to open image in {editor}"},settings:{headings:{menuOptions:"Toggle individual menu options",mousewheelZoom:"Mousewheel zoom",externalEditor:"External editor",advanced:"Advanced"},items:{whatsNew:{name:"What's new in Pixel Perfect Image {version}",desc:"See the latest changes and improvements.",buttonText:"View recent updates"},fileInfo:{name:"File information",desc:"Show filename and dimensions at top of menu"},showInExplorer:{name:"Show in Finder/Explorer",desc:"Show option to reveal image in system file explorer"},renameImage:{name:"Rename image",desc:"Show option to rename image file"},deleteImage:{name:"Delete image and link",desc:"Show option to delete both image file and link"},openInNewTab:{name:"Open in new tab",desc:"Show option to open image in new tab"},openToTheRight:{name:"Open to the right",desc:"Show option to open image in a right split"},openInNewWindow:{name:"Open in new window",desc:"Show option to open image in a new app window"},openInDefaultApp:{name:"Open in default app",desc:"Show option to open image in default app"},resizeOptions:{name:"Resize options",desc:"Set resize options (comma-separated). Use % for percentages (e.g., 25%, 50%) or px for pixels (e.g., 600px, 800px)",placeholder:"e.g., 25%, 50%, 100%, 600px"},cmdClickBehavior:{name:"{cmd} + click behavior",desc:"Choose what happens when you {cmd} + click an image",options:{doNothing:"Do nothing",openInNewTab:"Open in new tab",openInDefaultApp:"Open in default app",openInEditor:"Open in {editor}"}},enableWheelZoom:{name:"Enable mousewheel zoom",desc:"Hold modifier key and scroll to resize images"},modifierKey:{name:"Modifier key",desc:"Key to hold while scrolling to zoom images",options:{alt:"Alt",option:"Option",ctrl:"Ctrl",shift:"Shift"}},zoomStepSize:{name:"Zoom step size",desc:"Percentage to zoom per scroll step",resetToDefault:"Reset to default"},invertScroll:{name:"Invert scroll direction",desc:"Invert the zoom direction when scrolling"},externalEditorName:{name:"External editor name",desc:"Name of your external editor (e.g., Photoshop)",placeholder:"Photoshop"},externalEditorPathMac:{name:"External editor path (macOS)",desc:"Full path to your external editor application on macOS",placeholder:"/Applications/Adobe Photoshop 2025/Adobe Photoshop 2025.app"},externalEditorPathWin:{name:"External editor path (Windows)",desc:"Full path to your external editor application on Windows",placeholder:"C:\\Program Files\\Adobe\\Adobe Photoshop 2025\\Photoshop.exe"},externalEditorPathLinux:{name:"External editor path (Linux)",desc:"Full path to your external editor application on Linux",placeholder:"/usr/bin/gimp"},confirmDelete:{name:"Confirm before delete",desc:"Show confirmation dialog before deleting files"},debugMode:{name:"Debug mode",desc:"Enable debug logging to console"}}},modals:{rename:{title:"Rename image",renameButton:"Rename",cancelButton:"Cancel"},delete:{title:"Delete image",confirmMessage:'Are you sure you want to delete "{filename}"?',warningMessage:"This will delete both the image file and all links to it in the current document.",deleteButton:"Delete",cancelButton:"Cancel"}},whatsNew:{title:"What's new in Pixel Perfect Image",categories:{new:"New",improved:"Improved",changed:"Changed",fixed:"Fixed"},supportMessage:"If Pixel Perfect Image is useful, please consider supporting its continued development.",supportButton:"Buy me a coffee",thanksButton:"Thanks!"},actions:{performAction:"perform action",openInNewTab:"open image in new tab",openToTheRight:"open image to the right",openInNewWindow:"open image in new window",openInDefaultApp:"open image in default app",openInEditor:"open image in {editor}"}}});var be,Te=D(()=>{be={menu:{remoteImage:"Remote-Bild",copyImageUrl:"Bild-URL kopieren",copyImage:"Bild kopieren",copyLocalPath:"Lokalen Pfad kopieren",resizeTo:"Gr\xF6\xDFe \xE4ndern auf {size}",removeCustomSize:"Benutzerdefinierte Gr\xF6\xDFe entfernen",showInFinder:"Show in Finder",showInExplorer:"Im Explorer anzeigen",renameImage:"Bild umbenennen",deleteImageAndLink:"Bild und Link l\xF6schen",openInNewTab:"In neuem Tab \xF6ffnen",openToTheRight:"Nach rechts \xF6ffnen",openInNewWindow:"In neuem Fenster \xF6ffnen",openInDefaultApp:"In Standard-App \xF6ffnen",openInEditor:"In {editor} \xF6ffnen"},notices:{imageUrlCopied:"Bild-URL in Zwischenablage kopiert",imageCopied:"Bild in Zwischenablage kopiert",filePathCopied:"Dateipfad in Zwischenablage kopiert",customSizeRemoved:"Benutzerdefinierte Gr\xF6\xDFe vom Bild entfernt",imageRenamed:"Bild erfolgreich umbenannt",imageAndLinksDeleted:"Bild und Links erfolgreich gel\xF6scht",imageDeleted:"Bild erfolgreich gel\xF6scht",couldNotReadDimensions:"Bildabmessungen konnten nicht gelesen werden",couldNotDetermineSvgDimensions:"SVG-Abmessungen konnten nicht bestimmt werden (width/height/viewBox fehlen)",couldNotDetermineImageDimensions:"Bildabmessungen konnten nicht bestimmt werden",cannotCopyPath:"Pfad kann nicht kopiert werden - kein Dateisystem-Adapter",couldNotLocateImage:"Bilddatei konnte nicht gefunden werden",setEditorPath:"Bitte legen Sie den {editor}-Pfad in den Pixel Perfect Image Einstellungen fest.",cannotOpenFile:"Datei kann nicht ge\xF6ffnet werden: Dieser Vault verwendet ein nicht-standardm\xE4\xDFiges Speichersystem",couldNotOpenInEditor:"Datei konnte nicht in {editor} ge\xF6ffnet werden.",failedToRename:"Umbenennen des Bildes fehlgeschlagen",failedToDelete:"L\xF6schen von Bild und Links fehlgeschlagen",clickInEditorFirst:"Bitte klicken Sie zuerst in den Editor und versuchen Sie dann erneut zu kopieren",failedToResize:"Gr\xF6\xDFen\xE4nderung des Bildes fehlgeschlagen",failedToPerformAction:"{action} fehlgeschlagen",failedToCopyUrl:"Kopieren der Bild-URL fehlgeschlagen",failedToCopyImage:"Kopieren des Bildes in Zwischenablage fehlgeschlagen",failedToCopyPath:"Kopieren des Dateipfads fehlgeschlagen",failedToResizeTo:"Gr\xF6\xDFen\xE4nderung auf {size} fehlgeschlagen",failedToRemoveSize:"Entfernen der benutzerdefinierten Gr\xF6\xDFe fehlgeschlagen",failedToOpenExplorer:"\xD6ffnen des System-Explorers fehlgeschlagen",failedToRenameImage:"Umbenennen des Bildes fehlgeschlagen",failedToDeleteImage:"L\xF6schen des Bildes fehlgeschlagen",failedToOpenInNewTab:"\xD6ffnen des Bildes in neuem Tab fehlgeschlagen",failedToOpenToTheRight:"\xD6ffnen des Bildes nach rechts fehlgeschlagen",failedToOpenInNewWindow:"\xD6ffnen des Bildes in neuem Fenster fehlgeschlagen",failedToOpenInDefaultApp:"\xD6ffnen in Standard-App fehlgeschlagen",failedToOpenInEditor:"\xD6ffnen des Bildes in {editor} fehlgeschlagen"},settings:{headings:{menuOptions:"Einzelne Men\xFCoptionen umschalten",mousewheelZoom:"Mausrad-Zoom",externalEditor:"Externer Editor",advanced:"Erweitert"},items:{whatsNew:{name:"Was ist neu in Pixel Perfect Image {version}",desc:"Sieh dir die neuesten \xC4nderungen und Verbesserungen an.",buttonText:"Neueste Updates anzeigen"},fileInfo:{name:"Dateiinformationen",desc:"Dateiname und Abmessungen oben im Men\xFC anzeigen"},showInExplorer:{name:"Show in Finder/Explorer",desc:"Option zum Anzeigen des Bildes im System-Dateiexplorer anzeigen"},renameImage:{name:"Bild umbenennen",desc:"Option zum Umbenennen der Bilddatei anzeigen"},deleteImage:{name:"Bild und Link l\xF6schen",desc:"Option zum L\xF6schen von Bilddatei und Link anzeigen"},openInNewTab:{name:"In neuem Tab \xF6ffnen",desc:"Option zum \xD6ffnen des Bildes in neuem Tab anzeigen"},openToTheRight:{name:"Nach rechts \xF6ffnen",desc:"Option zum \xD6ffnen des Bildes in einem rechten Split anzeigen"},openInNewWindow:{name:"In neuem Fenster \xF6ffnen",desc:"Option zum \xD6ffnen des Bildes in einem neuen Anwendungsfenster anzeigen"},openInDefaultApp:{name:"In Standard-App \xF6ffnen",desc:"Option zum \xD6ffnen des Bildes in Standard-App anzeigen"},resizeOptions:{name:"Gr\xF6\xDFenoptionen",desc:"Gr\xF6\xDFenoptionen festlegen (kommagetrennt). Verwenden Sie % f\xFCr Prozent (z.B. 25%, 50%) oder px f\xFCr Pixel (z.B. 600px, 800px)",placeholder:"z.B. 25%, 50%, 100%, 600px"},cmdClickBehavior:{name:"{cmd} + Klick Verhalten",desc:"W\xE4hlen Sie, was passiert, wenn Sie {cmd} + Klick auf ein Bild ausf\xFChren",options:{doNothing:"Nichts tun",openInNewTab:"In neuem Tab \xF6ffnen",openInDefaultApp:"In Standard-App \xF6ffnen",openInEditor:"In {editor} \xF6ffnen"}},enableWheelZoom:{name:"Mausrad-Zoom aktivieren",desc:"Modifikationstaste halten und scrollen zum \xC4ndern der Bildgr\xF6\xDFe"},modifierKey:{name:"Modifikationstaste",desc:"Taste, die beim Scrollen zum Zoomen gehalten werden muss",options:{alt:"Alt",option:"Option",ctrl:"Strg",shift:"Umschalt"}},zoomStepSize:{name:"Zoom-Schrittgr\xF6\xDFe",desc:"Prozentsatz zum Zoomen pro Scroll-Schritt",resetToDefault:"Auf Standard zur\xFCcksetzen"},invertScroll:{name:"Scroll-Richtung umkehren",desc:"Zoom-Richtung beim Scrollen umkehren"},externalEditorName:{name:"Name des externen Editors",desc:"Name Ihres externen Editors (z.B. Photoshop)",placeholder:"Photoshop"},externalEditorPathMac:{name:"Pfad zum externen Editor (macOS)",desc:"Vollst\xE4ndiger Pfad zu Ihrer externen Editor-Anwendung auf macOS",placeholder:"/Applications/Adobe Photoshop 2025/Adobe Photoshop 2025.app"},externalEditorPathWin:{name:"Pfad zum externen Editor (Windows)",desc:"Vollst\xE4ndiger Pfad zu Ihrer externen Editor-Anwendung auf Windows",placeholder:"C:\\Program Files\\Adobe\\Adobe Photoshop 2025\\Photoshop.exe"},externalEditorPathLinux:{name:"Pfad zum externen Editor (Linux)",desc:"Vollst\xE4ndiger Pfad zu Ihrer externen Editor-Anwendung unter Linux",placeholder:"/usr/bin/gimp"},confirmDelete:{name:"Vor dem L\xF6schen best\xE4tigen",desc:"Best\xE4tigungsdialog vor dem L\xF6schen von Dateien anzeigen"},debugMode:{name:"Debug-Modus",desc:"Debug-Protokollierung in Konsole aktivieren"}}},modals:{rename:{title:"Bild umbenennen",renameButton:"Umbenennen",cancelButton:"Abbrechen"},delete:{title:"Bild l\xF6schen",confirmMessage:'M\xF6chten Sie "{filename}" wirklich l\xF6schen?',warningMessage:"Dies l\xF6scht sowohl die Bilddatei als auch alle Links dazu im aktuellen Dokument.",deleteButton:"L\xF6schen",cancelButton:"Abbrechen"}},whatsNew:{title:"Was ist neu in Pixel Perfect Image",categories:{new:"Neu",improved:"Verbessert",changed:"Ge\xE4ndert",fixed:"Behoben"},supportMessage:"Wenn Pixel Perfect Image n\xFCtzlich ist, erw\xE4ge bitte eine Unterst\xFCtzung der weiteren Entwicklung.",supportButton:"Kauf mir einen Kaffee",thanksButton:"Danke!"},actions:{performAction:"Aktion ausf\xFChren",openInNewTab:"Bild in neuem Tab \xF6ffnen",openToTheRight:"Bild nach rechts \xF6ffnen",openInNewWindow:"Bild in neuem Fenster \xF6ffnen",openInDefaultApp:"Bild in Standard-App \xF6ffnen",openInEditor:"Bild in {editor} \xF6ffnen"}}});var Se,Ee=D(()=>{Se={menu:{remoteImage:"Imagen remota",copyImageUrl:"Copiar URL de imagen",copyImage:"Copiar imagen",copyLocalPath:"Copiar ruta local",resizeTo:"Redimensionar a {size}",removeCustomSize:"Eliminar tama\xF1o personalizado",showInFinder:"Show in Finder",showInExplorer:"Mostrar en Explorador",renameImage:"Renombrar imagen",deleteImageAndLink:"Eliminar imagen y enlace",openInNewTab:"Abrir en nueva pesta\xF1a",openToTheRight:"Abrir a la derecha",openInNewWindow:"Abrir en nueva ventana",openInDefaultApp:"Abrir con aplicaci\xF3n predeterminada",openInEditor:"Abrir en {editor}"},notices:{imageUrlCopied:"URL de imagen copiada al portapapeles",imageCopied:"Imagen copiada al portapapeles",filePathCopied:"Ruta del archivo copiada al portapapeles",customSizeRemoved:"Tama\xF1o personalizado eliminado de la imagen",imageRenamed:"Imagen renombrada exitosamente",imageAndLinksDeleted:"Imagen y enlaces eliminados exitosamente",imageDeleted:"Imagen eliminada exitosamente",couldNotReadDimensions:"No se pudieron leer las dimensiones de la imagen",couldNotDetermineSvgDimensions:"No se pudieron determinar las dimensiones del SVG (faltan width/height/viewBox)",couldNotDetermineImageDimensions:"No se pudieron determinar las dimensiones de la imagen",cannotCopyPath:"No se puede copiar la ruta - no usa adaptador del sistema de archivos",couldNotLocateImage:"No se pudo localizar el archivo de imagen",setEditorPath:"Por favor, configura la ruta de {editor} en la configuraci\xF3n de Pixel Perfect Image.",cannotOpenFile:"No se puede abrir el archivo: Esta b\xF3veda usa un sistema de almacenamiento no est\xE1ndar",couldNotOpenInEditor:"No se pudo abrir el archivo en {editor}.",failedToRename:"Error al renombrar la imagen",failedToDelete:"Error al eliminar la imagen y enlaces",clickInEditorFirst:"Por favor, haz clic en el editor primero, luego intenta copiar nuevamente",failedToResize:"Error al redimensionar la imagen",failedToPerformAction:"Error al {action}",failedToCopyUrl:"Error al copiar URL de imagen",failedToCopyImage:"Error al copiar imagen al portapapeles",failedToCopyPath:"Error al copiar la ruta del archivo",failedToResizeTo:"Error al redimensionar imagen a {size}",failedToRemoveSize:"Error al eliminar tama\xF1o personalizado de la imagen",failedToOpenExplorer:"Error al abrir el explorador del sistema",failedToRenameImage:"Error al renombrar la imagen",failedToDeleteImage:"Error al eliminar la imagen",failedToOpenInNewTab:"Error al abrir imagen en nueva pesta\xF1a",failedToOpenToTheRight:"Error al abrir imagen a la derecha",failedToOpenInNewWindow:"Error al abrir imagen en nueva ventana",failedToOpenInDefaultApp:"Error al abrir con aplicaci\xF3n predeterminada",failedToOpenInEditor:"Error al abrir imagen en {editor}"},settings:{headings:{menuOptions:"Alternar opciones individuales del men\xFA",mousewheelZoom:"Zoom con rueda del rat\xF3n",externalEditor:"Editor externo",advanced:"Avanzado"},items:{whatsNew:{name:"Novedades de Pixel Perfect Image {version}",desc:"Consulta los \xFAltimos cambios y mejoras.",buttonText:"Ver actualizaciones recientes"},fileInfo:{name:"Informaci\xF3n del archivo",desc:"Mostrar nombre del archivo y dimensiones en la parte superior del men\xFA"},showInExplorer:{name:"Show in Finder/Explorador",desc:"Mostrar opci\xF3n para revelar imagen en el explorador de archivos del sistema"},renameImage:{name:"Renombrar imagen",desc:"Mostrar opci\xF3n para renombrar archivo de imagen"},deleteImage:{name:"Eliminar imagen y enlace",desc:"Mostrar opci\xF3n para eliminar tanto el archivo de imagen como el enlace"},openInNewTab:{name:"Abrir en nueva pesta\xF1a",desc:"Mostrar opci\xF3n para abrir imagen en nueva pesta\xF1a"},openToTheRight:{name:"Abrir a la derecha",desc:"Mostrar opci\xF3n para abrir imagen en una divisi\xF3n a la derecha"},openInNewWindow:{name:"Abrir en nueva ventana",desc:"Mostrar opci\xF3n para abrir imagen en una nueva ventana de la aplicaci\xF3n"},openInDefaultApp:{name:"Abrir con aplicaci\xF3n predeterminada",desc:"Mostrar opci\xF3n para abrir imagen con aplicaci\xF3n predeterminada"},resizeOptions:{name:"Opciones de redimensionado",desc:"Configurar opciones de redimensionado (separadas por comas). Usa % para porcentajes (ej., 25%, 50%) o px para p\xEDxeles (ej., 600px, 800px)",placeholder:"ej., 25%, 50%, 100%, 600px"},cmdClickBehavior:{name:"Comportamiento de {cmd} + clic",desc:"Elige qu\xE9 sucede cuando haces {cmd} + clic en una imagen",options:{doNothing:"No hacer nada",openInNewTab:"Abrir en nueva pesta\xF1a",openInDefaultApp:"Abrir con aplicaci\xF3n predeterminada",openInEditor:"Abrir en {editor}"}},enableWheelZoom:{name:"Habilitar zoom con rueda del rat\xF3n",desc:"Mant\xE9n presionada la tecla modificadora y despl\xE1zate para redimensionar im\xE1genes"},modifierKey:{name:"Tecla modificadora",desc:"Tecla a mantener mientras te desplazas para hacer zoom en im\xE1genes",options:{alt:"Alt",option:"Option",ctrl:"Ctrl",shift:"Shift"}},zoomStepSize:{name:"Tama\xF1o del paso de zoom",desc:"Porcentaje a hacer zoom por paso de desplazamiento",resetToDefault:"Restablecer a predeterminado"},invertScroll:{name:"Invertir direcci\xF3n de desplazamiento",desc:"Invertir la direcci\xF3n del zoom al desplazarse"},externalEditorName:{name:"Nombre del editor externo",desc:"Nombre de tu editor externo (ej., Photoshop)",placeholder:"Photoshop"},externalEditorPathMac:{name:"Ruta del editor externo (macOS)",desc:"Ruta completa a tu aplicaci\xF3n de editor externo en macOS",placeholder:"/Applications/Adobe Photoshop 2025/Adobe Photoshop 2025.app"},externalEditorPathWin:{name:"Ruta del editor externo (Windows)",desc:"Ruta completa a tu aplicaci\xF3n de editor externo en Windows",placeholder:"C:\\Program Files\\Adobe\\Adobe Photoshop 2025\\Photoshop.exe"},externalEditorPathLinux:{name:"Ruta del editor externo (Linux)",desc:"Ruta completa a tu aplicaci\xF3n de editor externo en Linux",placeholder:"/usr/bin/gimp"},confirmDelete:{name:"Confirmar antes de eliminar",desc:"Mostrar di\xE1logo de confirmaci\xF3n antes de eliminar archivos"},debugMode:{name:"Modo de depuraci\xF3n",desc:"Habilitar registro de depuraci\xF3n en la consola"}}},modals:{rename:{title:"Renombrar imagen",renameButton:"Renombrar",cancelButton:"Cancelar"},delete:{title:"Eliminar imagen",confirmMessage:'\xBFEst\xE1s seguro de que quieres eliminar "{filename}"?',warningMessage:"Esto eliminar\xE1 tanto el archivo de imagen como todos los enlaces a \xE9l en el documento actual.",deleteButton:"Eliminar",cancelButton:"Cancelar"}},whatsNew:{title:"Novedades de Pixel Perfect Image",categories:{new:"Nuevo",improved:"Mejorado",changed:"Cambiado",fixed:"Corregido"},supportMessage:"Si Pixel Perfect Image te resulta \xFAtil, considera apoyar su desarrollo.",supportButton:"Inv\xEDtame un caf\xE9",thanksButton:"\xA1Gracias!"},actions:{performAction:"realizar acci\xF3n",openInNewTab:"abrir imagen en nueva pesta\xF1a",openToTheRight:"abrir imagen a la derecha",openInNewWindow:"abrir imagen en nueva ventana",openInDefaultApp:"abrir imagen con aplicaci\xF3n predeterminada",openInEditor:"abrir imagen en {editor}"}}});var Pe,ye=D(()=>{Pe={menu:{remoteImage:"Image distante",copyImageUrl:"Copier l'URL de l'image",copyImage:"Copier l'image",copyLocalPath:"Copier le chemin local",resizeTo:"Redimensionner \xE0 {size}",removeCustomSize:"Supprimer la taille personnalis\xE9e",showInFinder:"Show in Finder",showInExplorer:"Afficher dans l'Explorateur",renameImage:"Renommer l'image",deleteImageAndLink:"Supprimer l'image et le lien",openInNewTab:"Ouvrir dans un nouvel onglet",openToTheRight:"Ouvrir \xE0 droite",openInNewWindow:"Ouvrir dans une nouvelle fen\xEAtre",openInDefaultApp:"Ouvrir avec l'application par d\xE9faut",openInEditor:"Ouvrir dans {editor}"},notices:{imageUrlCopied:"URL de l'image copi\xE9e dans le presse-papiers",imageCopied:"Image copi\xE9e dans le presse-papiers",filePathCopied:"Chemin du fichier copi\xE9 dans le presse-papiers",customSizeRemoved:"Taille personnalis\xE9e supprim\xE9e de l'image",imageRenamed:"Image renomm\xE9e avec succ\xE8s",imageAndLinksDeleted:"Image et liens supprim\xE9s avec succ\xE8s",imageDeleted:"Image supprim\xE9e avec succ\xE8s",couldNotReadDimensions:"Impossible de lire les dimensions de l'image",couldNotDetermineSvgDimensions:"Impossible de d\xE9terminer les dimensions du SVG (width/height/viewBox manquants)",couldNotDetermineImageDimensions:"Impossible de d\xE9terminer les dimensions de l'image",cannotCopyPath:"Impossible de copier le chemin - n'utilise pas l'adaptateur du syst\xE8me de fichiers",couldNotLocateImage:"Impossible de localiser le fichier image",setEditorPath:"Veuillez d\xE9finir le chemin de {editor} dans les param\xE8tres de Pixel Perfect Image.",cannotOpenFile:"Impossible d'ouvrir le fichier : Ce coffre utilise un syst\xE8me de stockage non standard",couldNotOpenInEditor:"Impossible d'ouvrir le fichier dans {editor}.",failedToRename:"\xC9chec du renommage de l'image",failedToDelete:"\xC9chec de la suppression de l'image et des liens",clickInEditorFirst:"Veuillez d'abord cliquer dans l'\xE9diteur, puis r\xE9essayer de copier",failedToResize:"\xC9chec du redimensionnement de l'image",failedToPerformAction:"\xC9chec de {action}",failedToCopyUrl:"\xC9chec de la copie de l'URL de l'image",failedToCopyImage:"\xC9chec de la copie de l'image dans le presse-papiers",failedToCopyPath:"\xC9chec de la copie du chemin du fichier",failedToResizeTo:"\xC9chec du redimensionnement de l'image \xE0 {size}",failedToRemoveSize:"\xC9chec de la suppression de la taille personnalis\xE9e de l'image",failedToOpenExplorer:"\xC9chec de l'ouverture de l'explorateur syst\xE8me",failedToRenameImage:"\xC9chec du renommage de l'image",failedToDeleteImage:"\xC9chec de la suppression de l'image",failedToOpenInNewTab:"\xC9chec de l'ouverture de l'image dans un nouvel onglet",failedToOpenToTheRight:"\xC9chec de l'ouverture de l'image \xE0 droite",failedToOpenInNewWindow:"\xC9chec de l'ouverture de l'image dans une nouvelle fen\xEAtre",failedToOpenInDefaultApp:"\xC9chec de l'ouverture avec l'application par d\xE9faut",failedToOpenInEditor:"\xC9chec de l'ouverture de l'image dans {editor}"},settings:{headings:{menuOptions:"Basculer les options individuelles du menu",mousewheelZoom:"Zoom avec la molette",externalEditor:"\xC9diteur externe",advanced:"Avanc\xE9"},items:{whatsNew:{name:"Quoi de neuf dans Pixel Perfect Image {version}",desc:"Consultez les derniers changements et am\xE9liorations.",buttonText:"Voir les mises \xE0 jour r\xE9centes"},fileInfo:{name:"Informations du fichier",desc:"Afficher le nom du fichier et les dimensions en haut du menu"},showInExplorer:{name:"Show in Finder/Explorateur",desc:"Afficher l'option pour r\xE9v\xE9ler l'image dans l'explorateur de fichiers syst\xE8me"},renameImage:{name:"Renommer l'image",desc:"Afficher l'option pour renommer le fichier image"},deleteImage:{name:"Supprimer l'image et le lien",desc:"Afficher l'option pour supprimer \xE0 la fois le fichier image et le lien"},openInNewTab:{name:"Ouvrir dans un nouvel onglet",desc:"Afficher l'option pour ouvrir l'image dans un nouvel onglet"},openToTheRight:{name:"Ouvrir \xE0 droite",desc:"Afficher l'option pour ouvrir l'image dans une division \xE0 droite"},openInNewWindow:{name:"Ouvrir dans une nouvelle fen\xEAtre",desc:"Afficher l'option pour ouvrir l'image dans une nouvelle fen\xEAtre de l'application"},openInDefaultApp:{name:"Ouvrir avec l'application par d\xE9faut",desc:"Afficher l'option pour ouvrir l'image avec l'application par d\xE9faut"},resizeOptions:{name:"Options de redimensionnement",desc:"D\xE9finir les options de redimensionnement (s\xE9par\xE9es par des virgules). Utiliser % pour les pourcentages (ex., 25%, 50%) ou px pour les pixels (ex., 600px, 800px)",placeholder:"ex., 25%, 50%, 100%, 600px"},cmdClickBehavior:{name:"Comportement {cmd} + clic",desc:"Choisir ce qui se passe lorsque vous faites {cmd} + clic sur une image",options:{doNothing:"Ne rien faire",openInNewTab:"Ouvrir dans un nouvel onglet",openInDefaultApp:"Ouvrir avec l'application par d\xE9faut",openInEditor:"Ouvrir dans {editor}"}},enableWheelZoom:{name:"Activer le zoom avec la molette",desc:"Maintenez la touche de modification et faites d\xE9filer pour redimensionner les images"},modifierKey:{name:"Touche de modification",desc:"Touche \xE0 maintenir enfonc\xE9e pendant le d\xE9filement pour zoomer sur les images",options:{alt:"Alt",option:"Option",ctrl:"Ctrl",shift:"Shift"}},zoomStepSize:{name:"Taille du pas de zoom",desc:"Pourcentage de zoom par \xE9tape de d\xE9filement",resetToDefault:"R\xE9initialiser par d\xE9faut"},invertScroll:{name:"Inverser la direction de d\xE9filement",desc:"Inverser la direction du zoom lors du d\xE9filement"},externalEditorName:{name:"Nom de l'\xE9diteur externe",desc:"Nom de votre \xE9diteur externe (ex., Photoshop)",placeholder:"Photoshop"},externalEditorPathMac:{name:"Chemin de l'\xE9diteur externe (macOS)",desc:"Chemin complet vers votre application d'\xE9diteur externe sur macOS",placeholder:"/Applications/Adobe Photoshop 2025/Adobe Photoshop 2025.app"},externalEditorPathWin:{name:"Chemin de l'\xE9diteur externe (Windows)",desc:"Chemin complet vers votre application d'\xE9diteur externe sur Windows",placeholder:"C:\\Program Files\\Adobe\\Adobe Photoshop 2025\\Photoshop.exe"},externalEditorPathLinux:{name:"Chemin de l'\xE9diteur externe (Linux)",desc:"Chemin complet vers votre \xE9diteur externe sous Linux",placeholder:"/usr/bin/gimp"},confirmDelete:{name:"Confirmer avant suppression",desc:"Afficher la bo\xEEte de dialogue de confirmation avant de supprimer les fichiers"},debugMode:{name:"Mode d\xE9bogage",desc:"Activer l'enregistrement de d\xE9bogage dans la console"}}},modals:{rename:{title:"Renommer l'image",renameButton:"Renommer",cancelButton:"Annuler"},delete:{title:"Supprimer l'image",confirmMessage:'\xCAtes-vous s\xFBr de vouloir supprimer "{filename}" ?',warningMessage:"Cela supprimera \xE0 la fois le fichier image et tous les liens vers celui-ci dans le document actuel.",deleteButton:"Supprimer",cancelButton:"Annuler"}},whatsNew:{title:"Quoi de neuf dans Pixel Perfect Image",categories:{new:"Nouveau",improved:"Am\xE9lior\xE9",changed:"Modifi\xE9",fixed:"Corrig\xE9"},supportMessage:"Si Pixel Perfect Image vous est utile, envisagez de soutenir son d\xE9veloppement.",supportButton:"M'offrir un caf\xE9",thanksButton:"Merci !"},actions:{performAction:"effectuer l'action",openInNewTab:"ouvrir l'image dans un nouvel onglet",openToTheRight:"ouvrir l'image \xE0 droite",openInNewWindow:"ouvrir l'image dans une nouvelle fen\xEAtre",openInDefaultApp:"ouvrir l'image avec l'application par d\xE9faut",openInEditor:"ouvrir l'image dans {editor}"}}});var De,Ce=D(()=>{De={menu:{remoteImage:"\u30EA\u30E2\u30FC\u30C8\u753B\u50CF",copyImageUrl:"\u753B\u50CFURL\u3092\u30B3\u30D4\u30FC",copyImage:"\u753B\u50CF\u3092\u30B3\u30D4\u30FC",copyLocalPath:"\u30ED\u30FC\u30AB\u30EB\u30D1\u30B9\u3092\u30B3\u30D4\u30FC",resizeTo:"{size}\u306B\u30EA\u30B5\u30A4\u30BA",removeCustomSize:"\u30AB\u30B9\u30BF\u30E0\u30B5\u30A4\u30BA\u3092\u524A\u9664",showInFinder:"Show in Finder",showInExplorer:"\u30A8\u30AF\u30B9\u30D7\u30ED\u30FC\u30E9\u30FC\u3067\u8868\u793A",renameImage:"\u753B\u50CF\u540D\u3092\u5909\u66F4",deleteImageAndLink:"\u753B\u50CF\u3068\u30EA\u30F3\u30AF\u3092\u524A\u9664",openInNewTab:"\u65B0\u3057\u3044\u30BF\u30D6\u3067\u958B\u304F",openToTheRight:"\u53F3\u306B\u958B\u304F",openInNewWindow:"\u65B0\u3057\u3044\u30A6\u30A3\u30F3\u30C9\u30A6\u3067\u958B\u304F",openInDefaultApp:"\u30C7\u30D5\u30A9\u30EB\u30C8\u30A2\u30D7\u30EA\u3067\u958B\u304F",openInEditor:"{editor}\u3067\u958B\u304F"},notices:{imageUrlCopied:"\u753B\u50CFURL\u3092\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u306B\u30B3\u30D4\u30FC\u3057\u307E\u3057\u305F",imageCopied:"\u753B\u50CF\u3092\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u306B\u30B3\u30D4\u30FC\u3057\u307E\u3057\u305F",filePathCopied:"\u30D5\u30A1\u30A4\u30EB\u30D1\u30B9\u3092\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u306B\u30B3\u30D4\u30FC\u3057\u307E\u3057\u305F",customSizeRemoved:"\u753B\u50CF\u304B\u3089\u30AB\u30B9\u30BF\u30E0\u30B5\u30A4\u30BA\u3092\u524A\u9664\u3057\u307E\u3057\u305F",imageRenamed:"\u753B\u50CF\u540D\u3092\u6B63\u5E38\u306B\u5909\u66F4\u3057\u307E\u3057\u305F",imageAndLinksDeleted:"\u753B\u50CF\u3068\u30EA\u30F3\u30AF\u3092\u6B63\u5E38\u306B\u524A\u9664\u3057\u307E\u3057\u305F",imageDeleted:"\u753B\u50CF\u3092\u6B63\u5E38\u306B\u524A\u9664\u3057\u307E\u3057\u305F",couldNotReadDimensions:"\u753B\u50CF\u306E\u5BF8\u6CD5\u3092\u8AAD\u307F\u53D6\u308C\u307E\u305B\u3093\u3067\u3057\u305F",couldNotDetermineSvgDimensions:"SVG\u306E\u5BF8\u6CD5\u3092\u7279\u5B9A\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\uFF08width/height/viewBox\u304C\u3042\u308A\u307E\u305B\u3093\uFF09",couldNotDetermineImageDimensions:"\u753B\u50CF\u306E\u5BF8\u6CD5\u3092\u7279\u5B9A\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",cannotCopyPath:"\u30D1\u30B9\u3092\u30B3\u30D4\u30FC\u3067\u304D\u307E\u305B\u3093 - \u30D5\u30A1\u30A4\u30EB\u30B7\u30B9\u30C6\u30E0\u30A2\u30C0\u30D7\u30BF\u30FC\u3092\u4F7F\u7528\u3057\u3066\u3044\u307E\u305B\u3093",couldNotLocateImage:"\u753B\u50CF\u30D5\u30A1\u30A4\u30EB\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F",setEditorPath:"Pixel Perfect Image\u8A2D\u5B9A\u3067{editor}\u306E\u30D1\u30B9\u3092\u8A2D\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044\u3002",cannotOpenFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u958B\u3051\u307E\u305B\u3093\uFF1A\u3053\u306EVault\u306F\u6A19\u6E96\u4EE5\u5916\u306E\u30B9\u30C8\u30EC\u30FC\u30B8\u30B7\u30B9\u30C6\u30E0\u3092\u4F7F\u7528\u3057\u3066\u3044\u307E\u3059",couldNotOpenInEditor:"{editor}\u3067\u30D5\u30A1\u30A4\u30EB\u3092\u958B\u3051\u307E\u305B\u3093\u3067\u3057\u305F\u3002",failedToRename:"\u753B\u50CF\u540D\u306E\u5909\u66F4\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToDelete:"\u753B\u50CF\u3068\u30EA\u30F3\u30AF\u306E\u524A\u9664\u306B\u5931\u6557\u3057\u307E\u3057\u305F",clickInEditorFirst:"\u6700\u521D\u306B\u30A8\u30C7\u30A3\u30BF\u30FC\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u304B\u3089\u3001\u3082\u3046\u4E00\u5EA6\u30B3\u30D4\u30FC\u3057\u3066\u304F\u3060\u3055\u3044",failedToResize:"\u753B\u50CF\u306E\u30EA\u30B5\u30A4\u30BA\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToPerformAction:"{action}\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToCopyUrl:"\u753B\u50CFURL\u306E\u30B3\u30D4\u30FC\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToCopyImage:"\u753B\u50CF\u306E\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u3078\u306E\u30B3\u30D4\u30FC\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToCopyPath:"\u30D5\u30A1\u30A4\u30EB\u30D1\u30B9\u306E\u30B3\u30D4\u30FC\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToResizeTo:"\u753B\u50CF\u306E{size}\u3078\u306E\u30EA\u30B5\u30A4\u30BA\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToRemoveSize:"\u753B\u50CF\u304B\u3089\u30AB\u30B9\u30BF\u30E0\u30B5\u30A4\u30BA\u306E\u524A\u9664\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToOpenExplorer:"\u30B7\u30B9\u30C6\u30E0\u30A8\u30AF\u30B9\u30D7\u30ED\u30FC\u30E9\u30FC\u306E\u8D77\u52D5\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToRenameImage:"\u753B\u50CF\u540D\u306E\u5909\u66F4\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToDeleteImage:"\u753B\u50CF\u306E\u524A\u9664\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToOpenInNewTab:"\u65B0\u3057\u3044\u30BF\u30D6\u3067\u753B\u50CF\u3092\u958B\u304F\u306E\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToOpenToTheRight:"\u53F3\u5074\u3067\u753B\u50CF\u3092\u958B\u304F\u306E\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToOpenInNewWindow:"\u65B0\u3057\u3044\u30A6\u30A3\u30F3\u30C9\u30A6\u3067\u753B\u50CF\u3092\u958B\u304F\u306E\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToOpenInDefaultApp:"\u30C7\u30D5\u30A9\u30EB\u30C8\u30A2\u30D7\u30EA\u3067\u958B\u304F\u306E\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToOpenInEditor:"{editor}\u3067\u753B\u50CF\u3092\u958B\u304F\u306E\u306B\u5931\u6557\u3057\u307E\u3057\u305F"},settings:{headings:{menuOptions:"\u500B\u5225\u30E1\u30CB\u30E5\u30FC\u30AA\u30D7\u30B7\u30E7\u30F3\u306E\u5207\u308A\u66FF\u3048",mousewheelZoom:"\u30DE\u30A6\u30B9\u30DB\u30A4\u30FC\u30EB\u30BA\u30FC\u30E0",externalEditor:"\u5916\u90E8\u30A8\u30C7\u30A3\u30BF\u30FC",advanced:"\u9AD8\u5EA6\u306A\u8A2D\u5B9A"},items:{whatsNew:{name:"Pixel Perfect Image {version} \u306E\u65B0\u6A5F\u80FD",desc:"\u6700\u65B0\u306E\u5909\u66F4\u70B9\u3084\u6539\u5584\u70B9\u3092\u78BA\u8A8D\u3067\u304D\u307E\u3059\u3002",buttonText:"\u6700\u8FD1\u306E\u66F4\u65B0\u3092\u898B\u308B"},fileInfo:{name:"\u30D5\u30A1\u30A4\u30EB\u60C5\u5831",desc:"\u30E1\u30CB\u30E5\u30FC\u306E\u4E0A\u90E8\u306B\u30D5\u30A1\u30A4\u30EB\u540D\u3068\u30B5\u30A4\u30BA\u3092\u8868\u793A\u3057\u307E\u3059"},showInExplorer:{name:"Show in Finder/\u30A8\u30AF\u30B9\u30D7\u30ED\u30FC\u30E9\u30FC",desc:"\u30B7\u30B9\u30C6\u30E0\u30D5\u30A1\u30A4\u30EB\u30A8\u30AF\u30B9\u30D7\u30ED\u30FC\u30E9\u30FC\u3067\u753B\u50CF\u3092\u8868\u793A\u3059\u308B\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u8868\u793A\u3057\u307E\u3059"},renameImage:{name:"\u753B\u50CF\u540D\u3092\u5909\u66F4",desc:"\u753B\u50CF\u30D5\u30A1\u30A4\u30EB\u540D\u3092\u5909\u66F4\u3059\u308B\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u8868\u793A\u3057\u307E\u3059"},deleteImage:{name:"\u753B\u50CF\u3068\u30EA\u30F3\u30AF\u3092\u524A\u9664",desc:"\u753B\u50CF\u30D5\u30A1\u30A4\u30EB\u3068\u30EA\u30F3\u30AF\u306E\u4E21\u65B9\u3092\u524A\u9664\u3059\u308B\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u8868\u793A\u3057\u307E\u3059"},openInNewTab:{name:"\u65B0\u3057\u3044\u30BF\u30D6\u3067\u958B\u304F",desc:"\u753B\u50CF\u3092\u65B0\u3057\u3044\u30BF\u30D6\u3067\u958B\u304F\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u8868\u793A\u3057\u307E\u3059"},openToTheRight:{name:"\u53F3\u306B\u958B\u304F",desc:"\u753B\u50CF\u3092\u53F3\u5074\u306E\u5206\u5272\u3067\u958B\u304F\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u8868\u793A\u3057\u307E\u3059"},openInNewWindow:{name:"\u65B0\u3057\u3044\u30A6\u30A3\u30F3\u30C9\u30A6\u3067\u958B\u304F",desc:"\u753B\u50CF\u3092\u65B0\u3057\u3044\u30A6\u30A3\u30F3\u30C9\u30A6\u3067\u958B\u304F\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u8868\u793A\u3057\u307E\u3059"},openInDefaultApp:{name:"\u30C7\u30D5\u30A9\u30EB\u30C8\u30A2\u30D7\u30EA\u3067\u958B\u304F",desc:"\u753B\u50CF\u3092\u30C7\u30D5\u30A9\u30EB\u30C8\u30A2\u30D7\u30EA\u3067\u958B\u304F\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u8868\u793A\u3057\u307E\u3059"},resizeOptions:{name:"\u30EA\u30B5\u30A4\u30BA\u30AA\u30D7\u30B7\u30E7\u30F3",desc:"\u30EA\u30B5\u30A4\u30BA\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u8A2D\u5B9A\u3057\u307E\u3059\uFF08\u30AB\u30F3\u30DE\u533A\u5207\u308A\uFF09\u3002\u30D1\u30FC\u30BB\u30F3\u30C6\u30FC\u30B8\u306B\u306F%\u3092\u4F7F\u7528\u3057\uFF08\u4F8B\uFF1A25%\u300150%\uFF09\u3001\u30D4\u30AF\u30BB\u30EB\u306B\u306Fpx\u3092\u4F7F\u7528\u3057\u307E\u3059\uFF08\u4F8B\uFF1A600px\u3001800px\uFF09",placeholder:"\u4F8B\uFF1A25%\u300150%\u3001100%\u3001600px"},cmdClickBehavior:{name:"{cmd} + \u30AF\u30EA\u30C3\u30AF\u306E\u52D5\u4F5C",desc:"\u753B\u50CF\u3092{cmd} + \u30AF\u30EA\u30C3\u30AF\u3057\u305F\u3068\u304D\u306E\u52D5\u4F5C\u3092\u9078\u629E\u3057\u307E\u3059",options:{doNothing:"\u4F55\u3082\u3057\u306A\u3044",openInNewTab:"\u65B0\u3057\u3044\u30BF\u30D6\u3067\u958B\u304F",openInDefaultApp:"\u30C7\u30D5\u30A9\u30EB\u30C8\u30A2\u30D7\u30EA\u3067\u958B\u304F",openInEditor:"{editor}\u3067\u958B\u304F"}},enableWheelZoom:{name:"\u30DE\u30A6\u30B9\u30DB\u30A4\u30FC\u30EB\u30BA\u30FC\u30E0\u3092\u6709\u52B9\u306B\u3059\u308B",desc:"\u4FEE\u98FE\u30AD\u30FC\u3092\u62BC\u3057\u306A\u304C\u3089\u30B9\u30AF\u30ED\u30FC\u30EB\u3057\u3066\u753B\u50CF\u3092\u30EA\u30B5\u30A4\u30BA\u3057\u307E\u3059"},modifierKey:{name:"\u4FEE\u98FE\u30AD\u30FC",desc:"\u753B\u50CF\u3092\u30BA\u30FC\u30E0\u3059\u308B\u305F\u3081\u306B\u30B9\u30AF\u30ED\u30FC\u30EB\u6642\u306B\u62BC\u3059\u5FC5\u8981\u304C\u3042\u308B\u30AD\u30FC",options:{alt:"Alt",option:"Option",ctrl:"Ctrl",shift:"Shift"}},zoomStepSize:{name:"\u30BA\u30FC\u30E0\u30B9\u30C6\u30C3\u30D7\u30B5\u30A4\u30BA",desc:"\u30B9\u30AF\u30ED\u30FC\u30EB\u30B9\u30C6\u30C3\u30D7\u3054\u3068\u306E\u30BA\u30FC\u30E0\u7387",resetToDefault:"\u30C7\u30D5\u30A9\u30EB\u30C8\u306B\u30EA\u30BB\u30C3\u30C8"},invertScroll:{name:"\u30B9\u30AF\u30ED\u30FC\u30EB\u65B9\u5411\u3092\u53CD\u8EE2",desc:"\u30B9\u30AF\u30ED\u30FC\u30EB\u6642\u306E\u30BA\u30FC\u30E0\u65B9\u5411\u3092\u53CD\u8EE2\u3057\u307E\u3059"},externalEditorName:{name:"\u5916\u90E8\u30A8\u30C7\u30A3\u30BF\u30FC\u540D",desc:"\u5916\u90E8\u30A8\u30C7\u30A3\u30BF\u30FC\u306E\u540D\u524D\uFF08\u4F8B\uFF1APhotoshop\uFF09",placeholder:"Photoshop"},externalEditorPathMac:{name:"\u5916\u90E8\u30A8\u30C7\u30A3\u30BF\u30FC\u30D1\u30B9\uFF08macOS\uFF09",desc:"macOS\u4E0A\u306E\u5916\u90E8\u30A8\u30C7\u30A3\u30BF\u30FC\u30A2\u30D7\u30EA\u30B1\u30FC\u30B7\u30E7\u30F3\u3078\u306E\u30D5\u30EB\u30D1\u30B9",placeholder:"/Applications/Adobe Photoshop 2025/Adobe Photoshop 2025.app"},externalEditorPathWin:{name:"\u5916\u90E8\u30A8\u30C7\u30A3\u30BF\u30FC\u30D1\u30B9\uFF08Windows\uFF09",desc:"Windows\u4E0A\u306E\u5916\u90E8\u30A8\u30C7\u30A3\u30BF\u30FC\u30A2\u30D7\u30EA\u30B1\u30FC\u30B7\u30E7\u30F3\u3078\u306E\u30D5\u30EB\u30D1\u30B9",placeholder:"C:\\Program Files\\Adobe\\Adobe Photoshop 2025\\Photoshop.exe"},externalEditorPathLinux:{name:"\u5916\u90E8\u30A8\u30C7\u30A3\u30BF\u30FC\u306E\u30D1\u30B9\uFF08Linux\uFF09",desc:"Linux \u306E\u5916\u90E8\u30A8\u30C7\u30A3\u30BF\u30FC\u30A2\u30D7\u30EA\u306E\u30D5\u30EB\u30D1\u30B9",placeholder:"/usr/bin/gimp"},confirmDelete:{name:"\u524A\u9664\u524D\u306B\u78BA\u8A8D",desc:"\u30D5\u30A1\u30A4\u30EB\u524A\u9664\u524D\u306B\u78BA\u8A8D\u30C0\u30A4\u30A2\u30ED\u30B0\u3092\u8868\u793A\u3057\u307E\u3059"},debugMode:{name:"\u30C7\u30D0\u30C3\u30B0\u30E2\u30FC\u30C9",desc:"\u30B3\u30F3\u30BD\u30FC\u30EB\u306B\u30C7\u30D0\u30C3\u30B0\u30ED\u30B0\u3092\u51FA\u529B\u3057\u307E\u3059"}}},modals:{rename:{title:"\u753B\u50CF\u540D\u3092\u5909\u66F4",renameButton:"\u5909\u66F4",cancelButton:"\u30AD\u30E3\u30F3\u30BB\u30EB"},delete:{title:"\u753B\u50CF\u3092\u524A\u9664",confirmMessage:'"{filename}"\u3092\u524A\u9664\u3057\u3066\u3082\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F',warningMessage:"\u3053\u308C\u306B\u3088\u308A\u3001\u753B\u50CF\u30D5\u30A1\u30A4\u30EB\u3068\u73FE\u5728\u306E\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u5185\u306E\u3059\u3079\u3066\u306E\u30EA\u30F3\u30AF\u304C\u524A\u9664\u3055\u308C\u307E\u3059\u3002",deleteButton:"\u524A\u9664",cancelButton:"\u30AD\u30E3\u30F3\u30BB\u30EB"}},whatsNew:{title:"Pixel Perfect Image \u306E\u65B0\u6A5F\u80FD",categories:{new:"\u65B0\u6A5F\u80FD",improved:"\u6539\u5584",changed:"\u5909\u66F4",fixed:"\u4FEE\u6B63"},supportMessage:"Pixel Perfect Image \u304C\u5F79\u306B\u7ACB\u3063\u305F\u3089\u3001\u958B\u767A\u306E\u652F\u63F4\u3092\u3054\u691C\u8A0E\u304F\u3060\u3055\u3044\u3002",supportButton:"\u30B3\u30FC\u30D2\u30FC\u3092\u304A\u3054\u308B",thanksButton:"\u3042\u308A\u304C\u3068\u3046\uFF01"},actions:{performAction:"\u30A2\u30AF\u30B7\u30E7\u30F3\u3092\u5B9F\u884C",openInNewTab:"\u65B0\u3057\u3044\u30BF\u30D6\u3067\u753B\u50CF\u3092\u958B\u304F",openToTheRight:"\u53F3\u5074\u3067\u753B\u50CF\u3092\u958B\u304F",openInNewWindow:"\u65B0\u3057\u3044\u30A6\u30A3\u30F3\u30C9\u30A6\u3067\u753B\u50CF\u3092\u958B\u304F",openInDefaultApp:"\u30C7\u30D5\u30A9\u30EB\u30C8\u30A2\u30D7\u30EA\u3067\u753B\u50CF\u3092\u958B\u304F",openInEditor:"{editor}\u3067\u753B\u50CF\u3092\u958B\u304F"}}});var Ne,ke=D(()=>{Ne={menu:{remoteImage:"\u8FDC\u7A0B\u56FE\u50CF",copyImageUrl:"\u590D\u5236\u56FE\u50CFURL",copyImage:"\u590D\u5236\u56FE\u50CF",copyLocalPath:"\u590D\u5236\u672C\u5730\u8DEF\u5F84",resizeTo:"\u8C03\u6574\u5927\u5C0F\u5230{size}",removeCustomSize:"\u79FB\u9664\u81EA\u5B9A\u4E49\u5C3A\u5BF8",showInFinder:"Show in Finder",showInExplorer:"\u5728\u8D44\u6E90\u7BA1\u7406\u5668\u4E2D\u663E\u793A",renameImage:"\u91CD\u547D\u540D\u56FE\u50CF",deleteImageAndLink:"\u5220\u9664\u56FE\u50CF\u548C\u94FE\u63A5",openInNewTab:"\u5728\u65B0\u6807\u7B7E\u9875\u4E2D\u6253\u5F00",openToTheRight:"\u5728\u53F3\u4FA7\u6253\u5F00",openInNewWindow:"\u5728\u65B0\u7A97\u53E3\u4E2D\u6253\u5F00",openInDefaultApp:"\u7528\u9ED8\u8BA4\u5E94\u7528\u6253\u5F00",openInEditor:"\u5728{editor}\u4E2D\u6253\u5F00"},notices:{imageUrlCopied:"\u56FE\u50CFURL\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F",imageCopied:"\u56FE\u50CF\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F",filePathCopied:"\u6587\u4EF6\u8DEF\u5F84\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F",customSizeRemoved:"\u5DF2\u4ECE\u56FE\u50CF\u4E2D\u79FB\u9664\u81EA\u5B9A\u4E49\u5C3A\u5BF8",imageRenamed:"\u56FE\u50CF\u91CD\u547D\u540D\u6210\u529F",imageAndLinksDeleted:"\u56FE\u50CF\u548C\u94FE\u63A5\u5220\u9664\u6210\u529F",imageDeleted:"\u56FE\u50CF\u5220\u9664\u6210\u529F",couldNotReadDimensions:"\u65E0\u6CD5\u8BFB\u53D6\u56FE\u50CF\u5C3A\u5BF8",couldNotDetermineSvgDimensions:"\u65E0\u6CD5\u786E\u5B9A SVG \u5C3A\u5BF8\uFF08\u7F3A\u5C11 width/height/viewBox\uFF09",couldNotDetermineImageDimensions:"\u65E0\u6CD5\u786E\u5B9A\u56FE\u50CF\u5C3A\u5BF8",cannotCopyPath:"\u65E0\u6CD5\u590D\u5236\u8DEF\u5F84 - \u672A\u4F7F\u7528\u6587\u4EF6\u7CFB\u7EDF\u9002\u914D\u5668",couldNotLocateImage:"\u65E0\u6CD5\u627E\u5230\u56FE\u50CF\u6587\u4EF6",setEditorPath:"\u8BF7\u5728Pixel Perfect Image\u8BBE\u7F6E\u4E2D\u8BBE\u7F6E\u60A8\u7684{editor}\u8DEF\u5F84\u3002",cannotOpenFile:"\u65E0\u6CD5\u6253\u5F00\u6587\u4EF6\uFF1A\u6B64\u4FDD\u7BA1\u5E93\u4F7F\u7528\u975E\u6807\u51C6\u5B58\u50A8\u7CFB\u7EDF",couldNotOpenInEditor:"\u65E0\u6CD5\u5728{editor}\u4E2D\u6253\u5F00\u6587\u4EF6\u3002",failedToRename:"\u91CD\u547D\u540D\u56FE\u50CF\u5931\u8D25",failedToDelete:"\u5220\u9664\u56FE\u50CF\u548C\u94FE\u63A5\u5931\u8D25",clickInEditorFirst:"\u8BF7\u5148\u70B9\u51FB\u7F16\u8F91\u5668\uFF0C\u7136\u540E\u518D\u6B21\u5C1D\u8BD5\u590D\u5236",failedToResize:"\u8C03\u6574\u56FE\u50CF\u5927\u5C0F\u5931\u8D25",failedToPerformAction:"{action}\u5931\u8D25",failedToCopyUrl:"\u590D\u5236\u56FE\u50CFURL\u5931\u8D25",failedToCopyImage:"\u590D\u5236\u56FE\u50CF\u5230\u526A\u8D34\u677F\u5931\u8D25",failedToCopyPath:"\u590D\u5236\u6587\u4EF6\u8DEF\u5F84\u5931\u8D25",failedToResizeTo:"\u5C06\u56FE\u50CF\u8C03\u6574\u5230{size}\u5931\u8D25",failedToRemoveSize:"\u4ECE\u56FE\u50CF\u4E2D\u79FB\u9664\u81EA\u5B9A\u4E49\u5C3A\u5BF8\u5931\u8D25",failedToOpenExplorer:"\u6253\u5F00\u7CFB\u7EDF\u8D44\u6E90\u7BA1\u7406\u5668\u5931\u8D25",failedToRenameImage:"\u91CD\u547D\u540D\u56FE\u50CF\u5931\u8D25",failedToDeleteImage:"\u5220\u9664\u56FE\u50CF\u5931\u8D25",failedToOpenInNewTab:"\u5728\u65B0\u6807\u7B7E\u9875\u4E2D\u6253\u5F00\u56FE\u50CF\u5931\u8D25",failedToOpenToTheRight:"\u5728\u53F3\u4FA7\u6253\u5F00\u56FE\u50CF\u5931\u8D25",failedToOpenInNewWindow:"\u5728\u65B0\u7A97\u53E3\u4E2D\u6253\u5F00\u56FE\u50CF\u5931\u8D25",failedToOpenInDefaultApp:"\u7528\u9ED8\u8BA4\u5E94\u7528\u6253\u5F00\u5931\u8D25",failedToOpenInEditor:"\u5728{editor}\u4E2D\u6253\u5F00\u56FE\u50CF\u5931\u8D25"},settings:{headings:{menuOptions:"\u5207\u6362\u5355\u4E2A\u83DC\u5355\u9009\u9879",mousewheelZoom:"\u9F20\u6807\u6EDA\u8F6E\u7F29\u653E",externalEditor:"\u5916\u90E8\u7F16\u8F91\u5668",advanced:"\u9AD8\u7EA7"},items:{whatsNew:{name:"Pixel Perfect Image {version} \u7684\u65B0\u529F\u80FD",desc:"\u67E5\u770B\u6700\u65B0\u7684\u66F4\u6539\u4E0E\u6539\u8FDB\u3002",buttonText:"\u67E5\u770B\u6700\u8FD1\u66F4\u65B0"},fileInfo:{name:"\u6587\u4EF6\u4FE1\u606F",desc:"\u5728\u83DC\u5355\u9876\u90E8\u663E\u793A\u6587\u4EF6\u540D\u548C\u5C3A\u5BF8"},showInExplorer:{name:"Show in Finder/\u8D44\u6E90\u7BA1\u7406\u5668",desc:"\u663E\u793A\u5728\u7CFB\u7EDF\u6587\u4EF6\u8D44\u6E90\u7BA1\u7406\u5668\u4E2D\u663E\u793A\u56FE\u50CF\u7684\u9009\u9879"},renameImage:{name:"\u91CD\u547D\u540D\u56FE\u50CF",desc:"\u663E\u793A\u91CD\u547D\u540D\u56FE\u50CF\u6587\u4EF6\u7684\u9009\u9879"},deleteImage:{name:"\u5220\u9664\u56FE\u50CF\u548C\u94FE\u63A5",desc:"\u663E\u793A\u5220\u9664\u56FE\u50CF\u6587\u4EF6\u548C\u94FE\u63A5\u7684\u9009\u9879"},openInNewTab:{name:"\u5728\u65B0\u6807\u7B7E\u9875\u4E2D\u6253\u5F00",desc:"\u663E\u793A\u5728\u65B0\u6807\u7B7E\u9875\u4E2D\u6253\u5F00\u56FE\u50CF\u7684\u9009\u9879"},openToTheRight:{name:"\u5728\u53F3\u4FA7\u6253\u5F00",desc:"\u663E\u793A\u5728\u53F3\u4FA7\u5206\u5C4F\u4E2D\u6253\u5F00\u56FE\u50CF\u7684\u9009\u9879"},openInNewWindow:{name:"\u5728\u65B0\u7A97\u53E3\u4E2D\u6253\u5F00",desc:"\u663E\u793A\u5728\u65B0\u7684\u5E94\u7528\u7A97\u53E3\u4E2D\u6253\u5F00\u56FE\u50CF\u7684\u9009\u9879"},openInDefaultApp:{name:"\u7528\u9ED8\u8BA4\u5E94\u7528\u6253\u5F00",desc:"\u663E\u793A\u7528\u9ED8\u8BA4\u5E94\u7528\u6253\u5F00\u56FE\u50CF\u7684\u9009\u9879"},resizeOptions:{name:"\u8C03\u6574\u5927\u5C0F\u9009\u9879",desc:"\u8BBE\u7F6E\u8C03\u6574\u5927\u5C0F\u9009\u9879\uFF08\u7528\u9017\u53F7\u5206\u9694\uFF09\u3002\u4F7F\u7528%\u8868\u793A\u767E\u5206\u6BD4\uFF08\u4F8B\u5982\uFF1A25%\u300150%\uFF09\u6216px\u8868\u793A\u50CF\u7D20\uFF08\u4F8B\u5982\uFF1A600px\u3001800px\uFF09",placeholder:"\u4F8B\u5982\uFF1A25%\u300150%\u3001100%\u3001600px"},cmdClickBehavior:{name:"{cmd} + \u70B9\u51FB\u884C\u4E3A",desc:"\u9009\u62E9{cmd} + \u70B9\u51FB\u56FE\u50CF\u65F6\u7684\u884C\u4E3A",options:{doNothing:"\u4EC0\u4E48\u90FD\u4E0D\u505A",openInNewTab:"\u5728\u65B0\u6807\u7B7E\u9875\u4E2D\u6253\u5F00",openInDefaultApp:"\u7528\u9ED8\u8BA4\u5E94\u7528\u6253\u5F00",openInEditor:"\u5728{editor}\u4E2D\u6253\u5F00"}},enableWheelZoom:{name:"\u542F\u7528\u9F20\u6807\u6EDA\u8F6E\u7F29\u653E",desc:"\u6309\u4F4F\u4FEE\u9970\u952E\u5E76\u6EDA\u52A8\u4EE5\u8C03\u6574\u56FE\u50CF\u5927\u5C0F"},modifierKey:{name:"\u4FEE\u9970\u952E",desc:"\u6EDA\u52A8\u7F29\u653E\u56FE\u50CF\u65F6\u9700\u8981\u6309\u4F4F\u7684\u952E",options:{alt:"Alt",option:"Option",ctrl:"Ctrl",shift:"Shift"}},zoomStepSize:{name:"\u7F29\u653E\u6B65\u957F",desc:"\u6BCF\u6B21\u6EDA\u52A8\u6B65\u957F\u7684\u7F29\u653E\u767E\u5206\u6BD4",resetToDefault:"\u91CD\u7F6E\u4E3A\u9ED8\u8BA4\u503C"},invertScroll:{name:"\u53CD\u8F6C\u6EDA\u52A8\u65B9\u5411",desc:"\u53CD\u8F6C\u6EDA\u52A8\u65F6\u7684\u7F29\u653E\u65B9\u5411"},externalEditorName:{name:"\u5916\u90E8\u7F16\u8F91\u5668\u540D\u79F0",desc:"\u60A8\u7684\u5916\u90E8\u7F16\u8F91\u5668\u540D\u79F0\uFF08\u4F8B\u5982\uFF1APhotoshop\uFF09",placeholder:"Photoshop"},externalEditorPathMac:{name:"\u5916\u90E8\u7F16\u8F91\u5668\u8DEF\u5F84\uFF08macOS\uFF09",desc:"macOS\u4E0A\u5916\u90E8\u7F16\u8F91\u5668\u5E94\u7528\u7A0B\u5E8F\u7684\u5B8C\u6574\u8DEF\u5F84",placeholder:"/Applications/Adobe Photoshop 2025/Adobe Photoshop 2025.app"},externalEditorPathWin:{name:"\u5916\u90E8\u7F16\u8F91\u5668\u8DEF\u5F84\uFF08Windows\uFF09",desc:"Windows\u4E0A\u5916\u90E8\u7F16\u8F91\u5668\u5E94\u7528\u7A0B\u5E8F\u7684\u5B8C\u6574\u8DEF\u5F84",placeholder:"C:\\Program Files\\Adobe\\Adobe Photoshop 2025\\Photoshop.exe"},externalEditorPathLinux:{name:"\u5916\u90E8\u7F16\u8F91\u5668\u8DEF\u5F84\uFF08Linux\uFF09",desc:"Linux \u4E0A\u5916\u90E8\u7F16\u8F91\u5668\u7684\u5B8C\u6574\u8DEF\u5F84",placeholder:"/usr/bin/gimp"},confirmDelete:{name:"\u5220\u9664\u524D\u786E\u8BA4",desc:"\u5220\u9664\u6587\u4EF6\u524D\u663E\u793A\u786E\u8BA4\u5BF9\u8BDD\u6846"},debugMode:{name:"\u8C03\u8BD5\u6A21\u5F0F",desc:"\u5728\u63A7\u5236\u53F0\u4E2D\u542F\u7528\u8C03\u8BD5\u65E5\u5FD7"}}},modals:{rename:{title:"\u91CD\u547D\u540D\u56FE\u50CF",renameButton:"\u91CD\u547D\u540D",cancelButton:"\u53D6\u6D88"},delete:{title:"\u5220\u9664\u56FE\u50CF",confirmMessage:'\u60A8\u786E\u5B9A\u8981\u5220\u9664"{filename}"\u5417\uFF1F',warningMessage:"\u8FD9\u5C06\u5220\u9664\u56FE\u50CF\u6587\u4EF6\u4EE5\u53CA\u5F53\u524D\u6587\u6863\u4E2D\u6240\u6709\u6307\u5411\u5B83\u7684\u94FE\u63A5\u3002",deleteButton:"\u5220\u9664",cancelButton:"\u53D6\u6D88"}},whatsNew:{title:"Pixel Perfect Image \u7684\u65B0\u529F\u80FD",categories:{new:"\u65B0\u529F\u80FD",improved:"\u6539\u8FDB",changed:"\u66F4\u6539",fixed:"\u4FEE\u590D"},supportMessage:"\u5982\u679C Pixel Perfect Image \u5BF9\u4F60\u6709\u5E2E\u52A9\uFF0C\u8BF7\u8003\u8651\u652F\u6301\u5176\u6301\u7EED\u5F00\u53D1\u3002",supportButton:"\u8BF7\u6211\u559D\u676F\u5496\u5561",thanksButton:"\u8C22\u8C22\uFF01"},actions:{performAction:"\u6267\u884C\u64CD\u4F5C",openInNewTab:"\u5728\u65B0\u6807\u7B7E\u9875\u4E2D\u6253\u5F00\u56FE\u50CF",openToTheRight:"\u5728\u53F3\u4FA7\u6253\u5F00\u56FE\u50CF",openInNewWindow:"\u5728\u65B0\u7A97\u53E3\u4E2D\u6253\u5F00\u56FE\u50CF",openInDefaultApp:"\u7528\u9ED8\u8BA4\u5E94\u7528\u6253\u5F00\u56FE\u50CF",openInEditor:"\u5728{editor}\u4E2D\u6253\u5F00\u56FE\u50CF"}}});function Ye(){return(0,Me.getLanguage)()}function Je(){let c=Ye();return c&&c in Ae?c:"en"}var Me,Ae,s,N=D(()=>{Me=require("obsidian");xe();Te();Ee();ye();Ce();ke();Ae={en:Ie,de:be,es:Se,fr:Pe,ja:De,zh:Ne};s=Ae[Je()]});var de={};re(de,{WhatsNewModal:()=>le});function it(c){Promise.resolve().then(c).catch(e=>console.error(e))}function V(c,e,t,n){let i=o=>{it(()=>t(o))};return c.addEventListener(e,i,n),()=>c.removeEventListener(e,i,n)}function ot(c){let e=new Date(c);return Number.isNaN(e.getTime())?"":e.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}var We,le,ce=D(()=>{We=require("obsidian");N();le=class extends We.Modal{constructor(t,n,i){super(t);this.thanksButton=null;this.domDisposers=[];this.releaseNotes=n,this.onCloseCallback=i}renderFormattedText(t,n){let i=(r,a)=>{let l=/==([\s\S]*?)==|\[([^\]]+)\]\((https?:\/\/[^\s)]+)\)|\*\*([^*]+)\*\*|(https?:\/\/[^\s]+)/g,p=0,h,g=f=>{f.length>0&&a.appendText(f)};for(;(h=l.exec(r))!==null;){if(g(r.slice(p,h.index)),h[1]){let f=a.createSpan({cls:"pixel-perfect-whats-new-highlight"});i(h[1],f)}else if(h[2]&&h[3]){let f=a.createEl("a",{text:h[2]});f.setAttr("href",h[3]),f.setAttr("rel","noopener noreferrer"),f.setAttr("target","_blank")}else if(h[4])a.createEl("strong",{text:h[4]});else if(h[5]){let f=h[5],d="",m=f.match(/[.,;:!?)]+$/);m&&(d=m[0],f=f.slice(0,-d.length));let u=a.createEl("a",{text:f});u.setAttr("href",f),u.setAttr("rel","noopener noreferrer"),u.setAttr("target","_blank"),d&&g(d)}p=l.lastIndex}g(r.slice(p))},o=n.split(`
`);for(let r=0;r<o.length;r++)i(o[r],t),r<o.length-1&&t.createEl("br")}onOpen(){let{contentEl:t}=this;t.empty(),this.modalEl.addClass("pixel-perfect-whats-new-modal"),t.createEl("h2",{text:s.whatsNew.title,cls:"pixel-perfect-whats-new-header"}),this.attachCloseButtonHandler();let n=t.createDiv("pixel-perfect-whats-new-scroll");this.releaseNotes.forEach(p=>{let h=n.createDiv("pixel-perfect-whats-new-version");h.createEl("h3",{text:`Version ${p.version}`}),h.createEl("small",{text:ot(new Date(p.date).getTime())||p.date,cls:"pixel-perfect-whats-new-date"}),p.info&&p.info.split(/\n\s*\n/).forEach(d=>{let m=h.createEl("p",{cls:"pixel-perfect-whats-new-info"});this.renderFormattedText(m,d)}),[{key:"new",label:s.whatsNew.categories.new},{key:"improved",label:s.whatsNew.categories.improved},{key:"changed",label:s.whatsNew.categories.changed},{key:"fixed",label:s.whatsNew.categories.fixed}].forEach(f=>{let d=p[f.key];if(d&&d.length>0){h.createEl("h4",{text:f.label,cls:"pixel-perfect-whats-new-category"});let m=h.createEl("ul",{cls:"pixel-perfect-whats-new-features"});d.forEach(u=>{let w=m.createEl("li");this.renderFormattedText(w,u)})}})}),t.createDiv("pixel-perfect-whats-new-divider"),t.createDiv("pixel-perfect-whats-new-support").createEl("p",{text:s.whatsNew.supportMessage,cls:"pixel-perfect-whats-new-support-text"});let o=t.createDiv("pixel-perfect-whats-new-buttons"),r=o.createEl("button",{cls:"pixel-perfect-whats-new-support-button"});r.setAttr("type","button");let a=r.createSpan({cls:"pixel-perfect-whats-new-support-icon"});a.setAttr("aria-hidden","true"),a.setText("\u2615"),r.createSpan({cls:"pixel-perfect-whats-new-support-button-label",text:s.whatsNew.supportButton}),this.domDisposers.push(V(r,"click",()=>{window.open("https://www.buymeacoffee.com/johansan")}));let l=o.createEl("button",{text:s.whatsNew.thanksButton,cls:"mod-cta"});this.domDisposers.push(V(l,"click",()=>{this.close()})),this.thanksButton=l}open(){super.open(),this.thanksButton&&requestAnimationFrame(()=>{var t;(t=this.thanksButton)==null||t.focus()})}onClose(){var n;let{contentEl:t}=this;t.empty(),this.modalEl.removeClass("pixel-perfect-whats-new-modal"),this.domDisposers.length&&(this.domDisposers.forEach(i=>{try{i()}catch(o){console.error("Error disposing what's new modal listener:",o)}}),this.domDisposers=[]),(n=this.onCloseCallback)==null||n.call(this)}attachCloseButtonHandler(){let t=this.modalEl.querySelector(".modal-close-button");if(!t)return;let n=i=>{i.preventDefault(),this.close()};this.domDisposers.push(V(t,"click",n)),this.domDisposers.push(V(t,"pointerdown",n))}}});var me={};re(me,{compareVersions:()=>st,getLatestReleaseNotes:()=>Fe,getReleaseNotesBetweenVersions:()=>at,isReleaseAutoDisplayEnabled:()=>rt});function at(c,e){let t=W.findIndex(r=>r.version===c),n=W.findIndex(r=>r.version===e);if(t===-1||n===-1)return Fe();let i=Math.min(t,n),o=Math.max(t,n);return W.slice(i,o+1)}function Fe(c=5){return W.slice(0,c)}function st(c,e){let t=c.split(".").map(Number),n=e.split(".").map(Number);for(let i=0;i<Math.max(t.length,n.length);i+=1){let o=t[i]||0,r=n[i]||0;if(o>r)return 1;if(o<r)return-1}return 0}function rt(c){let e=W.find(t=>t.version===c);return e?e.showOnUpdate!==!1:!0}var W,pe=D(()=>{W=[{version:"1.0.23",date:"2025-12-16",showOnUpdate:!0,new:["==SVG Support==. You can now resize SVG images like any other image. Copying SVG images is not supported since Obsidian clipboard only supports bitmap images."],improved:["Settings now support the new ==SettingGroup API== in Obsidian 1.11 and later. Settings groups are now clearly outlined."],changed:[],fixed:[]}]});var dt={};re(dt,{default:()=>te});module.exports=Xe(dt);var Ve=require("obsidian");var v=require("obsidian");N();var C=require("obsidian");function et(){return typeof C.SettingGroup=="function"&&typeof C.requireApiVersion=="function"&&(0,C.requireApiVersion)("1.11.0")}function Re(c){let e=et();return t=>{!e&&t&&new C.Setting(c).setName(t).setHeading();let n=c.createDiv();if(e){n.addClass("setting-group");let i=new C.SettingGroup(n);return t&&i.setHeading(t),{rootEl:n,addSetting:o=>{let r=null;if(i.addSetting(a=>{r=a,o(a)}),!r)throw new Error("SettingGroup.addSetting did not provide a Setting");return r}}}return{rootEl:n,addSetting:i=>{let o=new C.Setting(n);return i(o),o}}}}var tt="pixel-perfect-setting-hidden";function Le(c,e){c.classList.toggle(tt,!e)}function nt(c,e="pixel-perfect-sub-settings"){let t=c.settingEl.ownerDocument.createElement("div");return t.className=e,c.settingEl.after(t),t}function ze(c,e,t,n="pixel-perfect-sub-settings"){let i=nt(c,n);return Le(i,e()),c.addToggle(o=>{o.setValue(e()).onChange(r=>{Le(i,r);try{let a=t(r);a instanceof Promise&&a.catch(l=>console.error("Failed to persist setting:",l))}catch(a){console.error("Failed to persist setting:",a)}})}),i}var he={toggleIndividualMenuOptions:!1,showFileInfo:!0,showShowInFileExplorer:!0,showRenameOption:!0,showDeleteImageOption:!0,showOpenInNewTab:!0,showOpenToTheRight:!0,showOpenInNewWindow:!0,showOpenInDefaultApp:!0,customResizeSizes:["25%","50%","100%"],cmdCtrlClickBehavior:"do-nothing",enableWheelZoom:!0,wheelModifierKey:"Alt",wheelZoomPercentage:20,invertScrollDirection:!1,externalEditorName:"",externalEditorPathMac:"",externalEditorPathWin:"",externalEditorPathLinux:"",confirmBeforeDelete:!0,debugMode:!1,lastShownVersion:""};function ue(c){let e=c.trim().match(/^([1-9]\d*)(px|%)$/i);return e?{amount:Number.parseInt(e[1],10),unit:e[2].toLowerCase()}:null}function ge(c){let e=new Set,t=[];for(let n of c){let i=n.trim().toLowerCase();i&&ue(i)&&(e.has(i)||(e.add(i),t.push(i)))}return t}function _(c){return v.Platform.isMacOS?c.externalEditorPathMac:v.Platform.isWin?c.externalEditorPathWin:c.externalEditorPathLinux}var G=class extends v.PluginSettingTab{constructor(e,t){super(e,t),this.plugin=t}async display(){let{containerEl:e}=this;e.empty();let t=Re(e),n=t(void 0),i=async()=>{try{await this.plugin.saveSettings()}catch(d){console.error("Failed to save settings:",d)}},o=()=>{this.plugin.requestSaveSettings().catch(d=>console.error("Failed to save settings:",d))},r=this.plugin.manifest.version;n.addSetting(d=>{d.setName(s.settings.items.whatsNew.name.replace("{version}",r)).setDesc(s.settings.items.whatsNew.desc).addButton(m=>m.setButtonText(s.settings.items.whatsNew.buttonText).onClick(()=>{(async()=>{let{WhatsNewModal:u}=await Promise.resolve().then(()=>(ce(),de)),{getLatestReleaseNotes:w}=await Promise.resolve().then(()=>(pe(),me));new u(this.app,w()).open()})()}))});let a=n.addSetting(d=>{d.setName(s.settings.headings.menuOptions).setDesc("Show settings to toggle individual menu items")}),l=ze(a,()=>this.plugin.settings.toggleIndividualMenuOptions,d=>{this.plugin.settings.toggleIndividualMenuOptions=d,i()});new v.Setting(l).setName(s.settings.items.fileInfo.name).setDesc(s.settings.items.fileInfo.desc).addToggle(d=>{d.setValue(this.plugin.settings.showFileInfo).onChange(async m=>{this.plugin.settings.showFileInfo=m,i()})}),new v.Setting(l).setName(s.settings.items.showInExplorer.name).setDesc(s.settings.items.showInExplorer.desc).addToggle(d=>d.setValue(this.plugin.settings.showShowInFileExplorer).onChange(async m=>{this.plugin.settings.showShowInFileExplorer=m,i()})),new v.Setting(l).setName(s.settings.items.renameImage.name).setDesc(s.settings.items.renameImage.desc).addToggle(d=>d.setValue(this.plugin.settings.showRenameOption).onChange(async m=>{this.plugin.settings.showRenameOption=m,i()})),new v.Setting(l).setName(s.settings.items.deleteImage.name).setDesc(s.settings.items.deleteImage.desc).addToggle(d=>d.setValue(this.plugin.settings.showDeleteImageOption).onChange(async m=>{this.plugin.settings.showDeleteImageOption=m,i()})),new v.Setting(l).setName(s.settings.items.openInNewTab.name).setDesc(s.settings.items.openInNewTab.desc).addToggle(d=>d.setValue(this.plugin.settings.showOpenInNewTab).onChange(async m=>{this.plugin.settings.showOpenInNewTab=m,i()})),new v.Setting(l).setName(s.settings.items.openToTheRight.name).setDesc(s.settings.items.openToTheRight.desc).addToggle(d=>d.setValue(this.plugin.settings.showOpenToTheRight).onChange(async m=>{this.plugin.settings.showOpenToTheRight=m,i()})),new v.Setting(l).setName(s.settings.items.openInNewWindow.name).setDesc(s.settings.items.openInNewWindow.desc).addToggle(d=>d.setValue(this.plugin.settings.showOpenInNewWindow).onChange(async m=>{this.plugin.settings.showOpenInNewWindow=m,i()})),new v.Setting(l).setName(s.settings.items.openInDefaultApp.name).setDesc(s.settings.items.openInDefaultApp.desc).addToggle(d=>d.setValue(this.plugin.settings.showOpenInDefaultApp).onChange(async m=>{this.plugin.settings.showOpenInDefaultApp=m,i()})),n.addSetting(d=>{d.setName(s.settings.items.resizeOptions.name).setDesc(s.settings.items.resizeOptions.desc).addText(m=>{m.setPlaceholder(s.settings.items.resizeOptions.placeholder).setValue(this.plugin.settings.customResizeSizes.join(", ")).onChange(async u=>{let w=ge(u.split(","));this.plugin.settings.customResizeSizes=w,o()})})});let p=v.Platform.isMacOS?"CMD":"CTRL";n.addSetting(d=>{d.setName(s.settings.items.cmdClickBehavior.name.replace("{cmd}",p)).setDesc(s.settings.items.cmdClickBehavior.desc.replace("{cmd}",p)).addDropdown(m=>{let u=this.plugin.settings.externalEditorName.trim()||"external editor";m.addOption("do-nothing",s.settings.items.cmdClickBehavior.options.doNothing).addOption("open-in-new-tab",s.settings.items.cmdClickBehavior.options.openInNewTab).addOption("open-in-default-app",s.settings.items.cmdClickBehavior.options.openInDefaultApp).addOption("open-in-external-editor",s.settings.items.cmdClickBehavior.options.openInEditor.replace("{editor}",u)).setValue(this.plugin.settings.cmdCtrlClickBehavior).onChange(async w=>{this.plugin.settings.cmdCtrlClickBehavior=w,i()})})});let h=t(s.settings.headings.mousewheelZoom);h.addSetting(d=>{d.setName(s.settings.items.enableWheelZoom.name).setDesc(s.settings.items.enableWheelZoom.desc).addToggle(m=>{m.setValue(this.plugin.settings.enableWheelZoom).onChange(async u=>{this.plugin.settings.enableWheelZoom=u,i()})})}),h.addSetting(d=>{d.setName(s.settings.items.modifierKey.name).setDesc(s.settings.items.modifierKey.desc).addDropdown(m=>{let u=v.Platform.isMacOS;m.addOption("Alt",u?s.settings.items.modifierKey.options.option:s.settings.items.modifierKey.options.alt).addOption("Ctrl",s.settings.items.modifierKey.options.ctrl).addOption("Shift",s.settings.items.modifierKey.options.shift).setValue(this.plugin.settings.wheelModifierKey).onChange(async w=>{this.plugin.settings.wheelModifierKey=w,i()})})}),h.addSetting(d=>{d.setName(s.settings.items.zoomStepSize.name).setDesc(s.settings.items.zoomStepSize.desc).addExtraButton(m=>{m.setIcon("reset").setTooltip(s.settings.items.zoomStepSize.resetToDefault).onClick(async()=>{this.plugin.settings.wheelZoomPercentage=he.wheelZoomPercentage,await i(),this.display()})}).addSlider(m=>{var y;let u=createSpan();u.addClass("pixel-perfect-zoom-value");let w=S=>{u.setText(`${S}%`)};m.setDynamicTooltip().setLimits(1,100,1).setValue(this.plugin.settings.wheelZoomPercentage).onChange(async S=>{w(S),this.plugin.settings.wheelZoomPercentage=S,o()}),w(this.plugin.settings.wheelZoomPercentage),(y=m.sliderEl.parentElement)==null||y.prepend(u)})}),h.addSetting(d=>{d.setName(s.settings.items.invertScroll.name).setDesc(s.settings.items.invertScroll.desc).addToggle(m=>{m.setValue(this.plugin.settings.invertScrollDirection).onChange(async u=>{this.plugin.settings.invertScrollDirection=u,i()})})});let g=t(s.settings.headings.externalEditor);g.addSetting(d=>{d.setName(s.settings.items.externalEditorName.name).setDesc(s.settings.items.externalEditorName.desc).addText(m=>{m.setPlaceholder(s.settings.items.externalEditorName.placeholder).setValue(this.plugin.settings.externalEditorName).onChange(async u=>{this.plugin.settings.externalEditorName=u,o()})})}),v.Platform.isMacOS&&g.addSetting(d=>{d.setName(s.settings.items.externalEditorPathMac.name).setDesc(s.settings.items.externalEditorPathMac.desc).addText(m=>{m.setPlaceholder(s.settings.items.externalEditorPathMac.placeholder).setValue(this.plugin.settings.externalEditorPathMac).onChange(async u=>{let w=u.replace(/\\ /g," ");this.plugin.settings.externalEditorPathMac=w,o()})})}),v.Platform.isWin&&g.addSetting(d=>{d.setName(s.settings.items.externalEditorPathWin.name).setDesc(s.settings.items.externalEditorPathWin.desc).addText(m=>{m.setPlaceholder(s.settings.items.externalEditorPathWin.placeholder).setValue(this.plugin.settings.externalEditorPathWin).onChange(async u=>{let w=u.replace(/\\ /g," ");this.plugin.settings.externalEditorPathWin=w,o()})})}),!v.Platform.isMacOS&&!v.Platform.isWin&&!v.Platform.isMobile&&g.addSetting(d=>{d.setName(s.settings.items.externalEditorPathLinux.name).setDesc(s.settings.items.externalEditorPathLinux.desc).addText(m=>{m.setPlaceholder(s.settings.items.externalEditorPathLinux.placeholder).setValue(this.plugin.settings.externalEditorPathLinux).onChange(async u=>{let w=u.trim();this.plugin.settings.externalEditorPathLinux=w,o()})})});let f=t(s.settings.headings.advanced);f.addSetting(d=>{d.setName(s.settings.items.confirmDelete.name).setDesc(s.settings.items.confirmDelete.desc).addToggle(m=>m.setValue(this.plugin.settings.confirmBeforeDelete).onChange(async u=>{this.plugin.settings.confirmBeforeDelete=u,i()}))}),f.addSetting(d=>{d.setName(s.settings.items.debugMode.name).setDesc(s.settings.items.debugMode.desc).addToggle(m=>{m.setValue(this.plugin.settings.debugMode).onChange(async u=>{this.plugin.settings.debugMode=u,i()})})})}};var B=require("obsidian");function L(c){return!c||!(c instanceof HTMLElement)?null:c instanceof HTMLImageElement?c:c.matches('.image-container, .image-embed, img, a.internal-embed[src*=".png"], a.internal-embed[src*=".jpg"], a.internal-embed[src*=".jpeg"], a.internal-embed[src*=".gif"], a.internal-embed[src*=".webp"], a.internal-embed[src*=".svg"]')?c.querySelector("img"):null}function Oe(c){let e=c.src||"";return e.startsWith("http://")||e.startsWith("https://")}function T(...c){let e=new Date().toTimeString().split(" ")[0];console.error(`${e}`,...c)}function F(c){try{return decodeURIComponent(c)}catch(e){return c}}function z(c){let e=new Error(c);return e.name="UserVisibleError",e}function O(c){return c instanceof Error&&c.name==="UserVisibleError"}function lt(c){let e=c.trim();if(!e)return null;let t=e.match(/^([1-9]\d*)(?:x([1-9]\d*))?(?:px)?$/i);if(!t)return null;let n=Number.parseInt(t[1],10);if(!Number.isFinite(n)||n<=0)return null;let i=t[2];if(!i)return{width:n};let o=Number.parseInt(i,10);return!Number.isFinite(o)||o<=0?{width:n}:{width:n,height:o}}function k(c){for(let e=c.length-1;e>=0;e-=1){let t=lt(c[e]);if(t)return{index:e,...t}}return null}N();var M=class M{constructor(e){this.isModifierKeyHeld=!1;this.wheelEventCleanup=null;this.wheelWidthCache=new Map;this.wheelPendingWidth=new Map;this.wheelDebounceTimers=new Map;this.wheelMaxWaitTimers=new Map;this.wheelTargets=new Map;this.wheelComputeQueue=new Map;this.wheelWriteQueue=new Map;this.plugin=e}setModifierKeyState(e){this.isModifierKeyHeld=e}registerWheelEvents(e){this.wheelEventCleanup&&(this.flushAllPendingWheelWrites(),this.wheelEventCleanup(),this.wheelEventCleanup=null);let t=e.document,n=l=>{this.isModifierKeyMatch(l)&&this.setModifierKeyState(!0)},i=l=>{this.isModifierKeyMatch(l)&&(this.setModifierKeyState(!1),this.flushAllPendingWheelWrites())},o=()=>{this.isModifierKeyHeld&&this.setModifierKeyState(!1),this.flushAllPendingWheelWrites()},r=async l=>{if(!this.plugin.settings.enableWheelZoom||!this.isModifierKeyHeld)return;if(!this.isModifierKeyStillHeld(l)){this.setModifierKeyState(!1);return}let p=L(l.target);if(p){l.preventDefault();try{await this.handleImageWheel(l,p)}catch(h){T("Error handling wheel event:",h),new B.Notice(s.notices.failedToResize)}}},a=new AbortController;t.addEventListener("keydown",n,{signal:a.signal}),t.addEventListener("keyup",i,{signal:a.signal}),e.addEventListener("blur",o,{signal:a.signal}),t.addEventListener("wheel",r,{passive:!1,signal:a.signal}),this.wheelEventCleanup=()=>{a.abort()}}isModifierKeyMatch(e){let t=this.plugin.settings.wheelModifierKey.toLowerCase(),n=e.key.toLowerCase();switch(t){case"alt":return n==="alt"||n==="option";case"ctrl":return n==="ctrl"||n==="control";case"shift":return n==="shift";default:return!1}}isModifierKeyStillHeld(e){switch(this.plugin.settings.wheelModifierKey.toLowerCase()){case"alt":return e.altKey;case"ctrl":return e.ctrlKey;case"shift":return e.shiftKey;default:return!1}}getWheelWidthCacheKey(e,t){return`${e.path}::${t.path}`}setWheelWidthCache(e,t){if(this.wheelWidthCache.set(e,t),this.wheelWidthCache.size<=M.WHEEL_WIDTH_CACHE_MAX_ENTRIES)return;let n=this.wheelWidthCache.keys().next().value;n&&this.wheelWidthCache.delete(n)}parseWidthFromImageAlt(e){var i,o,r;let t=(i=e.getAttribute("alt"))!=null?i:"";if(!t)return null;let n=t.split("|").map(a=>a.trim()).filter(Boolean);return(r=(o=k(n))==null?void 0:o.width)!=null?r:null}scheduleWheelWidthFlush(e,t,n){this.wheelTargets.set(e,{activeFile:t,imgFile:n});let i=this.wheelDebounceTimers.get(e);i&&clearTimeout(i);let o=setTimeout(()=>{this.wheelDebounceTimers.delete(e),this.flushWheelPendingWidth(e)},M.WHEEL_WRITE_DEBOUNCE_MS);if(this.wheelDebounceTimers.set(e,o),!this.wheelMaxWaitTimers.has(e)){let r=setTimeout(()=>{this.wheelMaxWaitTimers.delete(e),this.flushWheelPendingWidth(e)},M.WHEEL_WRITE_MAX_WAIT_MS);this.wheelMaxWaitTimers.set(e,r)}}flushWheelPendingWidth(e){var r;let t=this.wheelTargets.get(e);if(!t){this.wheelPendingWidth.delete(e);return}let{activeFile:n,imgFile:i}=t,o=((r=this.wheelWriteQueue.get(e))!=null?r:Promise.resolve()).catch(()=>{}).then(async()=>{let a=this.wheelPendingWidth.get(e);a!==void 0&&(await this.plugin.imageService.updateImageLinkWidth(i,a,n),this.setWheelWidthCache(e,a),this.wheelPendingWidth.get(e)===a&&this.wheelPendingWidth.delete(e))}).catch(a=>{T("Wheel resize write failed:",a)}).finally(()=>{this.wheelWriteQueue.get(e)===o&&this.wheelWriteQueue.delete(e);let a=this.wheelMaxWaitTimers.get(e);a&&(clearTimeout(a),this.wheelMaxWaitTimers.delete(e)),this.wheelPendingWidth.has(e)?this.scheduleWheelWidthFlush(e,n,i):this.wheelTargets.delete(e)});this.wheelWriteQueue.set(e,o)}flushAllPendingWheelWrites(){for(let e of this.wheelPendingWidth.keys()){let t=this.wheelDebounceTimers.get(e);t&&clearTimeout(t),this.wheelDebounceTimers.delete(e);let n=this.wheelMaxWaitTimers.get(e);n&&clearTimeout(n),this.wheelMaxWaitTimers.delete(e),this.flushWheelPendingWidth(e)}}async handleImageWheel(e,t){var l;if(!this.plugin.settings.enableWheelZoom)return;let n=this.plugin.app.workspace.getActiveViewOfType(B.MarkdownView);if(!(n!=null&&n.file))return;let i=await this.plugin.fileService.getImageFileWithErrorHandling(t,!1);if(!i)return;let o=this.getWheelWidthCacheKey(i.activeFile,i.imgFile),r=e.deltaY,a=((l=this.wheelComputeQueue.get(o))!=null?l:Promise.resolve()).catch(()=>{}).then(async()=>{var I;let p;try{p=t.naturalWidth>0?t.naturalWidth:(await this.plugin.imageService.readImageDimensions(i.imgFile)).width}catch(we){return}let h=this.parseWidthFromImageAlt(t),g=this.wheelWidthCache.get(o),f=this.wheelPendingWidth.get(o),d=h!==null?h:(I=f!=null?f:g)!=null?I:this.plugin.imageService.getCurrentImageWidth(i.activeFile,i.imgFile);h!==null?(this.setWheelWidthCache(o,h),this.wheelPendingWidth.delete(o)):g!==void 0||d!==null&&this.setWheelWidthCache(o,d);let m=d!=null?d:p,u=Math.min(1,Math.abs(r)/10),w=Math.max(1,Math.round(m*(this.plugin.settings.wheelZoomPercentage/100)*u)),y=r<0,R=(this.plugin.settings.invertScrollDirection?!y:y)?m+w:Math.max(1,m-w);R!==m&&(this.setWheelWidthCache(o,R),this.wheelPendingWidth.set(o,R),this.scheduleWheelWidthFlush(o,i.activeFile,i.imgFile))});this.wheelComputeQueue.set(o,a);try{await a}finally{this.wheelComputeQueue.get(o)===a&&this.wheelComputeQueue.delete(o)}}handleImageClick(e){if(!(e.metaKey||e.ctrlKey))return;let t=L(e.target);t&&this.plugin.settings.cmdCtrlClickBehavior!=="do-nothing"&&(e.preventDefault(),this.plugin.fileService.getImageFileWithErrorHandling(t).then(n=>{n&&(this.plugin.settings.cmdCtrlClickBehavior==="open-in-new-tab"?this.plugin.app.workspace.openLinkText(n.imgFile.path,"",!0):this.plugin.settings.cmdCtrlClickBehavior==="open-in-default-app"?this.plugin.fileService.openInDefaultApp(n.imgFile):this.plugin.settings.cmdCtrlClickBehavior==="open-in-external-editor"&&this.plugin.fileService.openInExternalEditor(n.imgFile.path))}).catch(n=>{let i=s.actions.performAction;if(this.plugin.settings.cmdCtrlClickBehavior==="open-in-new-tab")i=s.actions.openInNewTab;else if(this.plugin.settings.cmdCtrlClickBehavior==="open-in-default-app")i=s.actions.openInDefaultApp;else if(this.plugin.settings.cmdCtrlClickBehavior==="open-in-external-editor"){let o=this.plugin.settings.externalEditorName.trim()||"external editor";i=s.actions.openInEditor.replace("{editor}",o)}T(`Failed to ${i}:`,n),new B.Notice(s.notices.failedToPerformAction.replace("{action}",i))}))}registerEvents(){this.plugin.registerDomEvent(document,"click",e=>this.handleImageClick(e)),this.plugin.registerEvent(this.plugin.app.workspace.on("layout-change",()=>this.registerWheelEvents(window))),this.registerWheelEvents(window)}cleanup(){this.isModifierKeyHeld=!1,this.flushAllPendingWheelWrites(),this.wheelWidthCache.clear(),this.wheelPendingWidth.clear();for(let e of this.wheelDebounceTimers.values())clearTimeout(e);for(let e of this.wheelMaxWaitTimers.values())clearTimeout(e);this.wheelDebounceTimers.clear(),this.wheelMaxWaitTimers.clear(),this.wheelTargets.clear(),this.wheelComputeQueue.clear(),this.wheelWriteQueue.clear(),this.wheelEventCleanup&&(this.wheelEventCleanup(),this.wheelEventCleanup=null)}};M.WHEEL_WIDTH_CACHE_MAX_ENTRIES=300,M.WHEEL_WRITE_DEBOUNCE_MS=250,M.WHEEL_WRITE_MAX_WAIT_MS=2e3;var Z=M;var x=require("obsidian");var Be=require("path");N();var K=class{constructor(e){this.plugin=e}getRasterNaturalDimensions(e){let t=e.naturalWidth,n=e.naturalHeight;return t>0&&n>0?{width:t,height:n}:null}isSvgUrl(e){let t=e.trim().toLowerCase();if(!t)return!1;if(t.startsWith("data:image/svg+xml")||t.includes("image/svg+xml"))return!0;try{return new URL(e).pathname.toLowerCase().endsWith(".svg")}catch(n){return t.split(/[?#]/,1)[0].endsWith(".svg")}}isSvgBySrc(e){var n,i,o;return[(n=e.getAttribute("src"))!=null?n:"",(i=e.currentSrc)!=null?i:"",(o=e.src)!=null?o:""].some(r=>this.isSvgUrl(r))}registerImageContextMenu(){this.plugin.registerDomEvent(document,"contextmenu",this.handleContextMenu.bind(this),!0);let e=null;this.plugin.registerDomEvent(document,"touchstart",t=>{t.touches.length>1||!L(t.target)||(e=setTimeout(()=>{this.handleContextMenu(t)},500))},!0),this.plugin.registerDomEvent(document,"touchend",()=>{e&&clearTimeout(e),e=null},!0),this.plugin.registerDomEvent(document,"touchmove",()=>{e&&clearTimeout(e),e=null},!0)}async handleContextMenu(e){var a;if("touches"in e&&e.touches.length>1||!this.plugin.app.workspace.getActiveViewOfType(x.MarkdownView))return;let n=L(e.target);if(!n)return;e.preventDefault();let i=new x.Menu;if(Oe(n))this.addInfoMenuItem(i,s.menu.remoteImage,"globe"),this.isSvgBySrc(n)||this.addCopyImageMenuItem(i,n),this.addMenuItem(i,s.menu.copyImageUrl,"link",async()=>{await navigator.clipboard.writeText(n.src),new x.Notice(s.notices.imageUrlCopied)},s.notices.failedToCopyUrl);else{let l=await this.plugin.fileService.getImageFileWithErrorHandling(n),p=l?this.plugin.imageService.getCurrentImageWidth(l.activeFile,l.imgFile):null;await this.addDimensionsMenuItem(i,n,l,p),await this.addResizeMenuItems(i,n,l,p),x.Platform.isMobile||(i.addSeparator(),this.addFileOperationMenuItems(i,(a=l==null?void 0:l.imgFile)!=null?a:null))}let r={x:e instanceof MouseEvent?e.pageX:e.touches[0].pageX,y:e instanceof MouseEvent?e.pageY:e.touches[0].pageY};i.showAtPosition(r)}addInfoMenuItem(e,t,n){e.addItem(i=>{i.setTitle(t).setIcon(n).setDisabled(!0)})}async addDimensionsMenuItem(e,t,n,i){if(this.plugin.settings.showFileInfo)try{let o=n!==void 0?n:await this.plugin.fileService.getImageFileWithErrorHandling(t);if(!o)return;let r=o.imgFile.extension.toLowerCase()==="svg"||this.isSvgBySrc(t),a,l,p=r?null:this.getRasterNaturalDimensions(t);p?{width:a,height:l}=p:{width:a,height:l}=await this.plugin.imageService.readImageDimensions(o.imgFile);let h=i!==void 0?i:this.plugin.imageService.getCurrentImageWidth(o.activeFile,o.imgFile),g=h!==null?Math.round(h/a*100):null,f=g!==null?` @ ${g}%`:"";this.addInfoMenuItem(e,`${o.imgFile.name}${f}`,"image-file"),this.addInfoMenuItem(e,`${a} \xD7 ${l} px`,"info")}catch(o){T("Could not read dimensions:",o);let r=O(o)?o.message:s.notices.couldNotReadDimensions;new x.Notice(r)}}createMenuClickHandler(e,t){return async()=>{try{await e()}catch(n){T(t,n);let i=O(n)?n.message:t;new x.Notice(i)}}}addMenuItem(e,t,n,i,o,r=!1){e.addItem(a=>{a.setTitle(t).setIcon(n).setDisabled(r).onClick(this.createMenuClickHandler(i,o))})}addCopyImageMenuItem(e,t){this.addMenuItem(e,s.menu.copyImage,"copy",async()=>{await this.plugin.imageService.copyImageToClipboard(t),new x.Notice(s.notices.imageCopied)},s.notices.failedToCopyImage)}async addResizeMenuItems(e,t,n,i){var g,f;let o=n!==void 0?n:await this.plugin.fileService.getImageFileWithErrorHandling(t),r=null,a=i!==void 0?i:o?this.plugin.imageService.getCurrentImageWidth(o.activeFile,o.imgFile):null,l=null;if(!o){this.isSvgBySrc(t)||this.addCopyImageMenuItem(e,t);return}let{imgFile:p}=o,h=p.extension.toLowerCase()==="svg"||this.isSvgBySrc(t);if(h||(this.addCopyImageMenuItem(e,t),e.addSeparator()),this.addMenuItem(e,s.menu.copyLocalPath,"link",async()=>{let d=this.plugin.app.vault.adapter;if(!(d instanceof x.FileSystemAdapter)){new x.Notice(s.notices.cannotCopyPath);return}let m=d.getBasePath(),u=(0,Be.join)(m,(0,x.normalizePath)(p.path));await navigator.clipboard.writeText(u),new x.Notice(s.notices.filePathCopied)},s.notices.failedToCopyPath),e.addSeparator(),h||(l=(f=(g=this.getRasterNaturalDimensions(t))==null?void 0:g.width)!=null?f:null),l===null)try{let{width:d}=await this.plugin.imageService.readImageDimensions(p);l=d}catch(d){l=null}r=a!==null&&l!==null?Math.round(a/l*100):null,this.plugin.settings.customResizeSizes.length>0&&this.plugin.settings.customResizeSizes.forEach(d=>{let m=ue(d);if(!m)return;let u=m.amount,w=m.unit,y=s.menu.resizeTo.replace("{size}",d),S=w==="%",R=S?h&&l===null?!0:r===u:a===u,I="image";S?u===100?I="image":I="percent":I="ruler",this.addMenuItem(e,y,I,()=>this.plugin.imageService.resizeImage(t,u,!S),s.notices.failedToResizeTo.replace("{size}",d),R)}),a!==null&&this.addMenuItem(e,s.menu.removeCustomSize,"reset",async()=>{await this.plugin.imageService.removeImageWidth(p,o.activeFile),new x.Notice(s.notices.customSizeRemoved)},s.notices.failedToRemoveSize)}addFileOperationMenuItems(e,t){if(x.Platform.isMobile||!t)return;let n=x.Platform.isMacOS,i=_(this.plugin.settings),o=!!(i!=null&&i.trim()),r=this.plugin.settings.showOpenInNewTab||this.plugin.settings.showOpenToTheRight||this.plugin.settings.showOpenInNewWindow;if(this.plugin.settings.showOpenInNewTab&&this.addMenuItem(e,s.menu.openInNewTab,"lucide-file-plus",async()=>{await this.plugin.app.workspace.openLinkText(t.path,"",!0)},s.notices.failedToOpenInNewTab),this.plugin.settings.showOpenToTheRight&&this.addMenuItem(e,s.menu.openToTheRight,"lucide-separator-vertical",async()=>{let a=this.plugin.app.workspace.getLeaf("split","vertical");await a.openFile(t),this.plugin.app.workspace.setActiveLeaf(a)},s.notices.failedToOpenToTheRight),this.plugin.settings.showOpenInNewWindow&&this.addMenuItem(e,s.menu.openInNewWindow,"lucide-app-window",async()=>{let a=this.plugin.app.workspace.getLeaf("window");await a.openFile(t),this.plugin.app.workspace.setActiveLeaf(a)},s.notices.failedToOpenInNewWindow),r&&(this.plugin.settings.showOpenInDefaultApp||o)&&e.addSeparator(),this.plugin.settings.showOpenInDefaultApp&&this.addMenuItem(e,s.menu.openInDefaultApp,"image",async()=>{await this.plugin.fileService.openInDefaultApp(t)},s.notices.failedToOpenInDefaultApp),o){let a=this.plugin.settings.externalEditorName.trim()||"external editor";this.addMenuItem(e,s.menu.openInEditor.replace("{editor}",a),"edit",async()=>{await this.plugin.fileService.openInExternalEditor(t.path)},s.notices.failedToOpenInEditor.replace("{editor}",a))}(this.plugin.settings.showShowInFileExplorer||this.plugin.settings.showRenameOption||this.plugin.settings.showDeleteImageOption)&&e.addSeparator(),this.plugin.settings.showShowInFileExplorer&&this.addMenuItem(e,n?s.menu.showInFinder:s.menu.showInExplorer,n?"lucide-app-window-mac":"lucide-app-window",async()=>{await this.plugin.fileService.showInSystemExplorer(t)},s.notices.failedToOpenExplorer),this.plugin.settings.showRenameOption&&this.addMenuItem(e,s.menu.renameImage,"pencil",async()=>{await this.plugin.fileService.renameImage(t)},s.notices.failedToRenameImage),this.plugin.settings.showDeleteImageOption&&this.addMenuItem(e,s.menu.deleteImageAndLink,"lucide-trash",async()=>{await this.plugin.fileService.deleteImageAndLink(t)},s.notices.failedToDeleteImage)}};var Ue=require("obsidian");N();var j=class j{constructor(e){this.dimensionCache=new Map;this.plugin=e}setDimensionCache(e,t){if(this.dimensionCache.set(e,t),this.dimensionCache.size<=j.DIMENSION_CACHE_MAX_ENTRIES)return;let n=this.dimensionCache.keys().next().value;n&&this.dimensionCache.delete(n)}decodeText(e){let t=new Uint8Array(e);if(t.length>=2){if(t[0]===255&&t[1]===254)return new TextDecoder("utf-16le").decode(t);if(t[0]===254&&t[1]===255){let i=new Uint8Array(t.length);i.set(t);for(let o=0;o+1<i.length;o+=2){let r=i[o];i[o]=i[o+1],i[o+1]=r}return new TextDecoder("utf-16le").decode(i)}}if(t.length>=3&&t[0]===239&&t[1]===187&&t[2]===191)return new TextDecoder("utf-8").decode(t);let n=new TextDecoder("utf-8").decode(t);if(n.slice(0,200).includes("\0"))try{return new TextDecoder("utf-16le").decode(t)}catch(i){}return n}getMimeTypeForExtension(e){switch(e.toLowerCase()){case"png":return"image/png";case"jpg":case"jpeg":return"image/jpeg";case"gif":return"image/gif";case"webp":return"image/webp";case"avif":return"image/avif";case"bmp":return"image/bmp";case"tif":case"tiff":return"image/tiff";case"svg":return"image/svg+xml";default:return"image/*"}}parseSvgLengthToPx(e){if(!e)return null;let t=e.trim();if(!t)return null;let n=t.match(/^([+-]?(?:\d+|\d*\.\d+))\s*([a-z%]*)$/i);if(!n)return null;let i=Number(n[1]);if(!Number.isFinite(i))return null;let o=(n[2]||"").toLowerCase();if(o===""||o==="px")return i;switch(o){case"in":return i*96;case"cm":return i*96/2.54;case"mm":return i*96/25.4;case"pt":return i*96/72;case"pc":return i*16;case"q":return i*96/101.6;default:return null}}readSvgDimensionsFromBinary(e){var t,n,i,o,r,a,l,p,h,g,f,d,m,u,w,y;try{let S=this.decodeText(e),I=new DOMParser().parseFromString(S,"image/svg+xml").querySelector("svg"),we=(t=I==null?void 0:I.getAttribute("width"))!=null?t:null,Ge=(n=I==null?void 0:I.getAttribute("height"))!=null?n:null,ne=(o=(i=I==null?void 0:I.getAttribute("viewBox"))!=null?i:I==null?void 0:I.getAttribute("viewbox"))!=null?o:null,U=(a=(r=S.match(/<svg\b[^>]*>/i))==null?void 0:r[0])!=null?a:"",_e=(p=(l=U.match(/\bwidth\s*=\s*["']([^"']+)["']/i))==null?void 0:l[1])!=null?p:null,Ze=(g=(h=U.match(/\bheight\s*=\s*["']([^"']+)["']/i))==null?void 0:h[1])!=null?g:null,Ke=(u=(m=(f=U.match(/\bviewBox\s*=\s*["']([^"']+)["']/i))==null?void 0:f[1])!=null?m:(d=U.match(/\bviewbox\s*=\s*["']([^"']+)["']/i))==null?void 0:d[1])!=null?u:null,ie=(w=this.parseSvgLengthToPx(we))!=null?w:this.parseSvgLengthToPx(_e),oe=(y=this.parseSvgLengthToPx(Ge))!=null?y:this.parseSvgLengthToPx(Ze),ve=ne!=null?ne:Ke,E=ie!==null&&ie>0?ie:null,P=oe!==null&&oe>0?oe:null;if(E!==null&&P!==null)return{width:Math.round(E),height:Math.round(P)};if(ve){let H=ve.trim().split(/[\s,]+/).map(A=>Number(A));if(H.length>=4&&H.every(A=>Number.isFinite(A))){let A=H[2],ae=H[3];if(A>0&&ae>0){if(E===null&&P===null)return{width:300,height:150};if(E!==null&&P===null)return{width:Math.round(E),height:Math.round(E*ae/A)};if(E===null&&P!==null)return{width:Math.round(P*A/ae),height:Math.round(P)}}}}return E===null&&P===null?{width:300,height:150}:E!==null&&P===null?{width:Math.round(E),height:150}:E===null&&P!==null?{width:300,height:Math.round(P)}:{width:300,height:150}}catch(S){return null}}clearDimensionCache(){this.dimensionCache.clear()}async resizeImage(e,t,n=!1){let i=await this.plugin.fileService.getImageFileWithErrorHandling(e,!1);if(!i)throw z(s.notices.couldNotLocateImage);if(n){await this.updateImageLinkWidth(i.imgFile,t,i.activeFile);return}let{width:o}=await this.readImageDimensions(i.imgFile),r=Math.round(o*t/100);await this.updateImageLinkWidth(i.imgFile,r,i.activeFile)}async updateImageLinkWidth(e,t,n){let i=n!=null?n:this.plugin.app.workspace.getActiveFile();if(!i)throw new Error("No active file, cannot update link.");await this.plugin.linkService.updateImageLinks(i,e,o=>{let r=k(o);if(r){let a=String(t);return[...o.slice(0,r.index),a,...o.slice(r.index+1)]}return[...o,String(t)]})}async removeImageWidth(e,t){let n=t!=null?t:this.plugin.app.workspace.getActiveFile();if(!n)throw new Error("No active file, cannot update link.");await this.plugin.linkService.updateImageLinks(n,e,i=>{let o=k(i);return o?[...i.slice(0,o.index),...i.slice(o.index+1)]:i})}async readImageDimensions(e){let t=this.dimensionCache.get(e.path);if(t)return t;let n=await this.plugin.app.vault.readBinary(e),i=e.extension.toLowerCase()==="svg",o=i?this.readSvgDimensionsFromBinary(n):null;if(i&&o)return this.setDimensionCache(e.path,o),o;let r=this.createBlob(n,this.getMimeTypeForExtension(e.extension)),a=URL.createObjectURL(r);try{let l=await this.loadImage(a),p=l.naturalWidth||l.width,h=l.naturalHeight||l.height,g={width:p,height:h};if(!(Number.isFinite(g.width)&&Number.isFinite(g.height)&&g.width>0&&g.height>0))throw i?z(s.notices.couldNotDetermineSvgDimensions):z(s.notices.couldNotDetermineImageDimensions);return this.setDimensionCache(e.path,g),g}catch(l){throw i&&!O(l)?z(s.notices.couldNotDetermineSvgDimensions):l}finally{URL.revokeObjectURL(a)}}getCurrentImageWidth(e,t){var o;let n=(o=this.plugin.app.workspace.getActiveViewOfType(Ue.MarkdownView))==null?void 0:o.editor;if(!n)return null;let i=n.getValue();return this.plugin.linkService.findCurrentImageWidthInText(e,t,i)}loadImage(e,t){return new Promise((n,i)=>{let o=new Image;t&&(o.crossOrigin=t),o.onload=()=>n(o),o.onerror=()=>i(new Error("Failed to load image")),o.src=e})}createBlob(e,t){return new Blob([new Uint8Array(e)],{type:t})}async copyImageToClipboard(e){try{let t=await this.loadImage(e.src,"anonymous"),n=document.createElement("canvas");n.width=t.naturalWidth,n.height=t.naturalHeight;let i=n.getContext("2d");if(!i)throw new Error("Failed to get canvas context");i.drawImage(t,0,0);let o=await new Promise(a=>{n.toBlob(a)});if(!o)throw new Error("Failed to create blob");let r=new ClipboardItem({[o.type]:o});await navigator.clipboard.write([r])}catch(t){throw T("Copy to clipboard failed:",t),t instanceof Error&&t.message.includes("Document is not focused")?z(s.notices.clickInEditorFirst):t}}};j.DIMENSION_CACHE_MAX_ENTRIES=300;var $=j;var Q=/!\[\[([^\]]+)\]\]/g;var q=class{constructor(e){this.plugin=e}scanMarkdownImageLinks(e,t){let n=0,i=e.length;for(;n<i;){let o=e.indexOf("![",n);if(o===-1)break;let r=o+2,a=-1;for(;r<i;){let w=e[r];if(w==="\\"){r+=2;continue}if(w==="]"){a=r;break}r+=1}if(a===-1||e[a+1]!=="("){n=o+1;continue}let l=e.substring(o+2,a),p=a+1,h=0,g=-1;for(r=p;r<i;){let w=e[r];if(w==="\\"){r+=2;continue}if(w==="("&&(h+=1),w===")"&&(h-=1,h===0)){g=r;break}r+=1}if(g===-1)break;let f=e.substring(p+1,g),{url:d,titleSuffix:m}=this.splitMarkdownLinkDestination(f),u=e.substring(o,g+1);t({start:o,end:g+1,fullMatch:u,description:l,linkPath:d,titleSuffix:m}),n=g+1}}splitMarkdownLinkDestination(e){let t=e,n=0;for(;n<t.length&&/\s/.test(t[n]);)n+=1;if(n>=t.length)return{url:"",titleSuffix:""};if(t[n]==="<"){let a=n+1;for(;a<t.length;){let l=t[a];if(l==="\\"){a+=2;continue}if(l===">")break;a+=1}if(a<t.length&&t[a]===">"){let l=t.substring(n+1,a).trim(),p=t.substring(a+1);return{url:l,titleSuffix:p}}}let i=n;for(;n<t.length;){let a=t[n];if(a==="\\"){n+=2;continue}if(/\s/.test(a))break;n+=1}let o=t.substring(i,n).trim(),r=t.substring(n);return{url:o,titleSuffix:r}}encodeMarkdownPathSegment(e){return encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)}replaceMarkdownImageLinks(e,t){let n="",i=0;return this.scanMarkdownImageLinks(e,({start:o,end:r,fullMatch:a,description:l,linkPath:p,titleSuffix:h})=>{n+=e.substring(i,o),n+=t(a,l,p,h),i=r}),n+=e.substring(i),n}splitFrontmatter(e){let t=e.match(/^---\r?\n[\s\S]*?\r?\n---(?:\r?\n|$)/);if(!t)return{frontmatter:"",content:e};let n=t[0];return{frontmatter:n,content:e.substring(n.length)}}updateLinks(e,t,n,i){return e=e.replace(Q,(o,r)=>{let a=this.parseLinkComponents(r);return this.resolveLink(a.path,t,n)?(a.params=i(a.params),`![[${this.buildLinkPath(a)}]]`):o}),this.replaceMarkdownImageLinks(e,(o,r,a,l)=>{let p=this.parseLinkComponents(r,a);if(!this.resolveLink(p.path,t,n))return o;let g=r.split("|")[0].trim()||n.basename;p.params=i(p.params);let f=p.params.length>0?[g,...p.params].join("|"):g,d=`${this.buildLinkPath({...p,params:[]},!0)}${l}`;return`![${f}](${d})`})}parseLinkComponents(e,t){if(t){let[l,p]=t.split("#",2),h=p?`#${p}`:"",g=F(l),[,...f]=e.split("|");return{path:g,hash:h,params:f,isWikiStyle:!1}}let[n,...i]=e.split("|"),o=n,r="",a=n.indexOf("#");if(a>=0)o=n.substring(0,a),r=n.substring(a);else if(i.length>0){let l=i[i.length-1],p=l.indexOf("#");if(p>=0){let h=l.substring(0,p),g=l.substring(p);/^[1-9]\d*(?:x[1-9]\d*)?(?:px)?$/i.test(h)&&(i[i.length-1]=h,r=g)}}return{path:o,hash:r,params:i,isWikiStyle:!0}}buildLinkPath(e,t=!1){let n=e.params.length>0?`|${e.params.join("|")}`:"",i=e.path;return t&&(i=e.path.split("/").map(o=>this.encodeMarkdownPathSegment(o)).join("/")),`${i}${n}${e.hash}`}async updateImageLinks(e,t,n){if(e.path===t.path)return!1;let i=!1;try{await this.plugin.app.vault.process(e,o=>{let{frontmatter:r,content:a}=this.splitFrontmatter(o),l=this.updateLinks(a,e,t,n);return l===a?o:(i=!0,r?`${r}${l}`:l)})}catch(o){throw T("Failed to update file content:",o),new Error("Failed to update image link")}return i}resolveLink(e,t,n){let i=this.plugin.app.metadataCache.getFirstLinkpathDest(e,t.path);return!i||n&&i.path!==n.path?null:i}findCurrentImageWidthInText(e,t,n){for(let o of n.matchAll(Q)){let[,r]=o,a=this.parseLinkComponents(r);if(!this.resolveLink(a.path,e,t))continue;let l=k(a.params);if(l)return l.width}let i=null;return this.scanMarkdownImageLinks(n,({description:o,linkPath:r})=>{if(i!==null)return;let a=this.parseLinkComponents(o,r);if(!this.resolveLink(a.path,e,t))return;let l=k(a.params);l&&(i=l.width)}),i}async removeImageLinks(e){let t=this.plugin.app.workspace.getActiveFile();if(!t)throw new Error("No active file, cannot remove links.");if(t.path===e.path)return!1;let n=!1;try{await this.plugin.app.vault.process(t,i=>{let{frontmatter:o,content:r}=this.splitFrontmatter(i),a=r;return a=a.replace(Q,(l,p)=>{let h=this.parseLinkComponents(p);return this.resolveLink(h.path,t,e)?"":l}),a=this.replaceMarkdownImageLinks(a,(l,p,h,g)=>{let f=this.parseLinkComponents(p,h);return this.resolveLink(f.path,t,e)?"":l}),a===r?i:(n=!0,o?`${o}${a}`:a)})}catch(i){throw T("Failed to remove image links:",i),new Error("Failed to remove image links")}return n}};var b=require("obsidian"),He=require("path"),J=require("child_process");var fe=require("obsidian");N();var X=class extends fe.Modal{constructor(t,n,i){super(t);this.result=null;this.originalName=n,this.onSubmit=i}onOpen(){let{contentEl:t}=this;t.empty(),t.addClass("pixel-perfect-rename-modal"),t.createEl("h2",{text:s.modals.rename.title,cls:"modal-title"});let n=t.createEl("form");n.addClass("pixel-perfect-rename-form");let i=n.createEl("input",{type:"text",value:this.originalName,cls:"pixel-perfect-rename-input"}),o=this.originalName.lastIndexOf(".");if(o>0){let l=this.originalName.substring(0,o);i.setSelectionRange(0,l.length)}let r=n.createDiv();r.addClass("pixel-perfect-button-container"),r.createEl("button",{text:s.modals.rename.renameButton,type:"submit",cls:"mod-cta"}),r.createEl("button",{text:s.modals.rename.cancelButton,type:"button"}).addEventListener("click",()=>{this.onSubmit(null),this.close()}),n.addEventListener("submit",l=>{l.preventDefault();let p=i.value.trim();p&&p!==this.originalName?this.onSubmit(p):this.onSubmit(null),this.close()}),i.focus()}onClose(){let{contentEl:t}=this;t.empty(),this.result===void 0&&this.onSubmit(null)}},Y=class extends fe.Modal{constructor(e,t,n){super(e),this.file=t,this.onConfirm=n}onOpen(){let{contentEl:e}=this;e.empty(),e.addClass("pixel-perfect-delete-modal"),e.createEl("h2",{text:s.modals.delete.title,cls:"modal-title"});let t=e.createDiv();t.addClass("pixel-perfect-delete-message"),t.createEl("p",{text:s.modals.delete.confirmMessage.replace("{filename}",this.file.name)}),t.createEl("p",{text:s.modals.delete.warningMessage,cls:"mod-warning"});let n=e.createDiv();n.addClass("pixel-perfect-button-container");let i=n.createEl("button",{text:s.modals.delete.deleteButton,cls:"mod-warning"}),o=n.createEl("button",{text:s.modals.delete.cancelButton});i.addEventListener("click",()=>{this.onConfirm(),this.close()}),o.addEventListener("click",()=>{this.close()}),o.focus()}onClose(){let{contentEl:e}=this;e.empty()}};N();var ee=class{constructor(e){this.plugin=e}getFileForImage(e,t){var r;let n=(r=e.getAttribute("src"))!=null?r:"",i=e.getAttribute("alt"),o=this.parseFileNameFromSrc(n);if(o){let a=this.plugin.linkService.resolveLink(o,t);if(a)return a}if(i){i=i.split("|")[0].trim();let a=this.plugin.linkService.resolveLink(i,t);if(a)return a}return null}parseFileNameFromSrc(e){let t=e.trim();if(!t)return null;let[n]=t.split(/[?#]/,1);if(!n)return null;try{let o=new URL(n).pathname.split("/").filter(Boolean).pop();return o?F(o):null}catch(i){let o=F(n);if(!(o.startsWith("/")||/^[a-zA-Z]:[\\/]/.test(o))&&o.includes("/"))return o;let a=o.lastIndexOf("/");return(a>=0?o.substring(a+1):o)||null}}async getImageFileWithErrorHandling(e,t=!0){let n=this.plugin.app.workspace.getActiveFile();if(!n)return null;let i=this.getFileForImage(e,n);return i?{activeFile:n,imgFile:i}:(t&&(e.naturalWidth>0||e.src)&&new b.Notice(s.notices.couldNotLocateImage),null)}async showInSystemExplorer(e){this.plugin.app.showInFolder(e.path)}async openInDefaultApp(e){this.plugin.app.openWithDefaultApp(e.path)}openInExternalEditor(e){let t=_(this.plugin.settings),n=this.plugin.settings.externalEditorName.trim()||"External Editor";if(!t){new b.Notice(s.notices.setEditorPath.replace("{editor}",n));return}let i=this.plugin.app.vault.adapter;if(!(i instanceof b.FileSystemAdapter)){new b.Notice(s.notices.cannotOpenFile);return}let o=i.getBasePath(),r=(0,He.join)(o,(0,b.normalizePath)(e));try{let a;b.Platform.isMacOS?a=(0,J.spawn)("open",["-a",t,r],{detached:!0,stdio:"ignore"}):b.Platform.isWin?a=(0,J.spawn)(t,[r],{detached:!0,stdio:"ignore",shell:!1}):a=(0,J.spawn)(t,[r],{detached:!0,stdio:"ignore",shell:!1}),a.on("error",l=>{T(`Error launching ${n}:`,l),new b.Notice(s.notices.couldNotOpenInEditor.replace("{editor}",n))}),a.unref()}catch(a){T(`Error launching ${n}:`,a),new b.Notice(s.notices.couldNotOpenInEditor.replace("{editor}",n))}}async renameImage(e){var n;let t=await this.promptForNewName(e);if(t)try{let o=`${((n=e.parent)==null?void 0:n.path)||"/"}/${t}`;await this.plugin.app.fileManager.renameFile(e,o),new b.Notice(s.notices.imageRenamed)}catch(i){T("Failed to rename file:",i),new b.Notice(s.notices.failedToRename)}}async promptForNewName(e){return new Promise(t=>{new X(this.plugin.app,e.name,i=>{t(i)}).open()})}async deleteImageAndLink(e){let t=async()=>{try{let n=await this.plugin.linkService.removeImageLinks(e);await this.plugin.app.fileManager.trashFile(e),n?new b.Notice(s.notices.imageAndLinksDeleted):new b.Notice(s.notices.imageDeleted)}catch(n){T("Failed to delete image:",n),new b.Notice(s.notices.failedToDelete)}};this.plugin.settings.confirmBeforeDelete?new Y(this.plugin.app,e,t).open():await t()}};var te=class extends Ve.Plugin{constructor(){super(...arguments);this.hasStoredData=!1;this.settingsSaveQueue=Promise.resolve();this.settingsSaveDebounceTimer=null;this.settingsSaveDebouncedPromise=null;this.settingsSaveDebouncedResolve=null;this.settingsSaveDebouncedReject=null}async onload(){await this.loadSettings(),this.eventService=new Z(this),this.menuService=new K(this),this.imageService=new $(this),this.linkService=new q(this),this.fileService=new ee(this),this.addSettingTab(new G(this.app,this)),this.menuService.registerImageContextMenu(),this.eventService.registerEvents(),await this.checkForVersionUpdate()}onunload(){var t;this.eventService.cleanup(),this.imageService.clearDimensionCache(),this.settingsSaveDebounceTimer!==null&&(window.clearTimeout(this.settingsSaveDebounceTimer),this.settingsSaveDebounceTimer=null),this.settingsSaveDebouncedPromise&&((t=this.settingsSaveDebouncedReject)==null||t.call(this,new Error("Plugin unloaded before settings could be saved")),this.settingsSaveDebouncedPromise=null,this.settingsSaveDebouncedResolve=null,this.settingsSaveDebouncedReject=null)}async loadSettings(){let t=await this.loadData();this.hasStoredData=t!=null;let n=t&&typeof t=="object"&&!Array.isArray(t)?t:null;this.settings={...he,...n!=null?n:{}};let i=this.settings.customResizeSizes,o=Array.isArray(i)?i.filter(r=>typeof r=="string"):typeof i=="string"?i.split(","):[];this.settings.customResizeSizes=ge(o)}async saveSettings(){await this.enqueueSettingsSave()}requestSaveSettings(t=250){return this.settingsSaveDebouncedPromise||(this.settingsSaveDebouncedPromise=new Promise((n,i)=>{this.settingsSaveDebouncedResolve=n,this.settingsSaveDebouncedReject=i})),this.settingsSaveDebounceTimer!==null&&window.clearTimeout(this.settingsSaveDebounceTimer),this.settingsSaveDebounceTimer=window.setTimeout(()=>{this.settingsSaveDebounceTimer=null,this.enqueueSettingsSave().then(()=>{var n;return(n=this.settingsSaveDebouncedResolve)==null?void 0:n.call(this)}).catch(n=>{var i;return(i=this.settingsSaveDebouncedReject)==null?void 0:i.call(this,n)}).finally(()=>{this.settingsSaveDebouncedPromise=null,this.settingsSaveDebouncedResolve=null,this.settingsSaveDebouncedReject=null})},t),this.settingsSaveDebouncedPromise}enqueueSettingsSave(){return this.settingsSaveQueue=this.settingsSaveQueue.catch(t=>{console.error("Failed to save settings (previous save):",t)}).then(()=>this.saveData(this.settings)),this.settingsSaveQueue}async checkForVersionUpdate(){let t=this.manifest.version,n=this.settings.lastShownVersion;if(!n&&!this.hasStoredData){this.settings.lastShownVersion=t,await this.saveSettings();return}if(n===t)return;let{getReleaseNotesBetweenVersions:i,getLatestReleaseNotes:o,compareVersions:r,isReleaseAutoDisplayEnabled:a}=await Promise.resolve().then(()=>(pe(),me));if(!a(t))return;let{WhatsNewModal:l}=await Promise.resolve().then(()=>(ce(),de)),p=n&&r(t,n)>0?i(n,t):o();new l(this.app,p,()=>{setTimeout(()=>{this.settings.lastShownVersion=t,this.saveSettings()},1e3)}).open()}};

/* nosourcemap */